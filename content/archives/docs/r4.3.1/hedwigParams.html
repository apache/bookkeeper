<!DOCTYPE html>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<html>
  <head>
    <title>Apache BookKeeper - </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="/archives/css/bootstrap.min.css" rel="stylesheet">
    <link href="/archives/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/archives/css/styles.css" rel="stylesheet">
  </head>
  <body>
    <header class="navbar navbar-inverse navbar-static-top" role="banner">
      <div class="container">
    	<div class="navbar-header hidden-xs hidden-sm">
    	  <a class="navbar-brand navbar-logo" href="/archives/"><img class="img-responsive" src="/archives/img/bookkeeper_blk40.png" alt="Bookkeeper Logo" /></a>
    	</div>
    	<div class="navbar-header">
    	  <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
    	  </button>
    	  <a class="navbar-brand" href="/archives/">Apache BookKeeper</a>
    	</div>
    	<nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
    	  <ul class="nav navbar-nav">
    	    <li><a href="/archives/releases.html">Download</a></li>

    	    <li class="dropdown">
    	      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation<span class="caret"></span></a>
    	      <ul class="dropdown-menu" role="menu">
		<li><a href="/archives/docs/master">Latest (master)</a></li>
		<li><ul>
		    <li><a href="/archives/docs/master/apidocs">Java API docs</a></li>
		    <li><a href="/archives/docs/master/bookkeeperTutorial.html">Tutorial</a></li>
		    <li><a href="/archives/docs/master/bookkeeperConfig.html">Admin guide</a></li>
		</ul><li>
                <li><a href="/archives/docs/r4.4.0">Release 4.4.0</a></li>
                <li class="divider"></li>
                <li>Older releases</li>
                <li><a href="/archives/docs/r4.3.2">Release 4.3.2</a></li>
                <li><a href="/archives/docs/r4.3.1">Release 4.3.1</a></li>
                <li><a href="/archives/docs/r4.3.0">Release 4.3.0</a></li>
                <li><a href="/archives/docs/r4.2.4">Release 4.2.4</a></li>
                <li><a href="/archives/docs/r4.2.3">Release 4.2.3</a></li>
                <li><a href="/archives/docs/r4.2.2">Release 4.2.2</a></li>
                <li><a href="/archives/docs/r4.2.1">Release 4.2.1</a></li>
                <li><a href="/archives/docs/r4.2.0">Release 4.2.0</a></li>
                <li><a href="/archives/docs/r4.1.0">Release 4.1.0</a></li>
                <li><a href="/archives/docs/r4.0.0">Release 4.0.0</a></li>
              </ul>
            </li>
            
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Get Involved<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="/archives/lists.html">Mailing Lists</a></li>
                <li><a href="/archives/irc.html">IRC</a></li>
                <li><a href="/archives/svn.html">Version Control</a></li>
                <li><a href="https://issues.apache.org/jira/browse/BOOKKEEPER">Issue Tracker</a></li>
              </ul>
            </li>

            <li><a href="https://cwiki.apache.org/confluence/display/BOOKKEEPER/Index">Wiki</a></li>
            <!--<li><a href="#">Hedwig</a></li>//-->
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Project Info<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="/archives/credits.html">Who are we?</a></li>
                <li><a href="/archives/bylaws.html">Bylaws</a></li>
                <li><a href="http://www.apache.org/licenses/">License</a></li>
                <li class="divider"></li>
                <li><a href="/archives/privacy.html">Privacy Policy</a></li>
                <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsership</a></li>
                <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
              </ul>
            </li>
          </ul>
          <script>
            (function() {
            var cx = '017580107654524087317:iqnsyimpydg';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
            })();
          </script>
          
          <div class="navbar-form navbar-right visible-lg" id="googlebox">
            <gcse:searchbox-only></gcse:searchbox-only>
          </div>
        </nav>
      </div>
    </header>
    <div class="container">

 <p>        <br />
h1. Hedwig configuration parameters        <br />
        <br />
This page contains detailed information about configuration parameters used for Hubs, Regions, ZooKeeper, and BookKeeper.<br />
        <br />
h2. Hedwig server configuration parameters</p>

<p>Please also refer to the configuration file that comes with the distribution: <em>hedwig-server/conf/hw_server.conf</em>.  </p>

<h3>Region related parameters</h3>

<table><tr><td><code>region</code></td><td>Region identifier. Default is "standalone".</td></tr><tr><td><code>regions</code></td><td>List of region identifiers, space separated. Default is empty.</td></tr><tr><td><code>inter_region_ssl_enabled (deprecated)</code></td><td>Enables <span class="caps">SSL </span>across regions. Default is false. <strong>Since this parameter has been deprecated, use <i>ssl_enabled</i> in <em>hedwig-server/conf/hw_region_client.conf</em> to enable <span class="caps">SSL </span>across regions instead.</strong></td></tr><tr><td><code>retry_remote_subscribe_thread_run_interval</code></td><td>This parameter is used to determine how often we run a thread to retry those failed remote subscriptions in asynchronous mode (in milliseconds). Default is 2 minutes.</td></tr></table>

<h3>Hub server parameters</h3>

<table><tr><td><code>standalone</code></td><td>Sets the hub server to run in standalone mode (no regions). Default is false.</td></tr><tr><td><code>server_port</code></td><td>Sets the server port that receives client connections. Default is 4080.</td></tr><tr><td><code>ssl_enabled</code></td><td>Enables <span class="caps">SSL.</span> Default is false.</td></tr><tr><td><code>ssl_server_port</code></td><td>Sets the server port for <span class="caps">SSL </span>connections. Default is 9876.</td></tr><tr><td><code>password</code></td><td>Password used for pkcs12 certificate.. Default is the empty string.</td></tr><tr><td><code>cert_name</code></td><td>Sets the name of the <span class="caps">SSL </span>certificate if available as a resource. Default is the null string.</td></tr><tr><td><code>cert_path</code></td><td>Sets the path to the <span class="caps">SSL </span>certificate if it is available as a file. Default is the null string.</td></tr></table>

<h3>Read-ahead cache parameters</h3>

<table><tr><td><code>readahead_enabled</code></td><td>Enables read-ahead. Enabled by default.</td></tr><tr><td><code>readahead_count</code></td><td>Number of messages to read ahead. Default is 10.</td></tr><tr><td><code>readahead_size</code></td><td>Maximum number of bytes to read during a scan. Default is 4 megabytes.</td></tr></table>

<blockquote><p>Upon a range scan request for a given topic, two hints are provided as to when scanning should stop: the number of messages scanned and the total size of messages scanned. Scanning stops whenever one of these limits is exceeded.</p></blockquote>

<table><tr><td><code>cache_size</code></td><td>Sets the size of the read-ahead cache. Default is the smallest of 2G or half the heap size.</td></tr><tr><td><code>cache_entry_ttl</code></td><td>Sets <span class="caps">TTL </span>for cache entries. Each time adding new entry into the cache, those expired cache entries would be discarded. If the value is set to zero or less than zero, cache entry will not be evicted until the cache is fullfilled or the messages are already consumed. Default is 0.</td></tr><tr><td><code>scan_backoff_ms</code></td><td>The backoff time (in milliseconds) to retry scans after failures. Default value is 1s (1000ms). Default is 1s.</td></tr><tr><td><code>num_readahead_cache_threads</code></td><td>Sets the number of threads to be used for the read-ahead mechanism. Default is the number of cores as returned with a call to <code>Runtime.getRuntime().availableProcessors()</code>.</td></tr></table>

<h3>Publish and subscription parameters </h3>

<table><tr><td><code>max_message_size</code></td><td>Sets the maximum message size. Default is 1.2 megabytes.</td></tr><tr><td><code>default_message_window_size</code></td><td>This parameter is used for setting the default maximum number of messages that can be delivered to a subscriber without being consumed. We pause delivery to a subscriber when reaching the window size. Default is unlimited (0).</td></tr><tr><td><code>consume_interval</code></td><td>Sets the number of messages consumed before persisting information about consumed messages. A value greater than one avoids persisting information about consumed messages upon every consumed message. Default is 50.</td></tr><tr><td><code>retention_secs</code></td><td>the interval to release a topic. If this parameter is greater than zero, then schedule a task to release an owned topic. Default is 0 (never released).</td><td><code>messages_consumed_thread_run_interval</code></td><td>Time interval (in milliseconds) to run messages consumed timer task to<br />
delete those consumed ledgers in BookKeeper. Default is 1 minute (60,000 ms).</td></tr></table>


<h3>ZooKeeper parameters<br />
 <br />
| <code>zk_host</code> | Sets the ZooKeeper list of servers. Default is localhost:2181. |<br />
| <code>zk_timeout</code> | Sets the ZooKeeper session timeout. Default is 2s. |</h3>

<h3>BookKeeper parameters</h3>

<table><tr><td><code>bk_ensemble_size</code></td><td>Sets the ensemble size. Default is 3.</td></tr><tr><td><code>bk_write_quorum_size</code></td><td>Sets the write quorum size. Default is 2.</td></tr><tr><td><code>bk_ack_quorum_size</code></td><td>Sets the ack quorum size. Default is 2.</td></tr></table>

<blockquote><p>Note that the ack quorum size must be equal or smaller than the write quorum size.</p></blockquote>

<table><tr><td><code>max_entries_per_ledger</code></td><td>Maximum number of entries before we roll a ledger. Default is unlimited (0).</td></tr></table>

<h3>Metadata parameters</h3>

<table><tr><td><code>zk_prefix</code></td><td>Sets the ZooKeeper path prefix. Default is <em>/hedwig</em>.</td></tr><tr><td><code>metadata_manager_based_topic_manager_enabled</code></td><td>Enables the use of a metadata manager for topic management. Default is false.</td></tr><tr><td><code>metadata_manager_factory_class</code></td><td>Sets the default factory for the metadata manager. Default is null.</td></tr></table>

<h2>Region manager configuration parameters</h2>

<p>Please also refer to the configuration file that comes with the distribution: <em>hedwig-server/conf/hw_region_client.conf</em>.</p>

<p>| <code>ssl_enabled</code> | This parameter is a boolean flag indicating if communication with the server should be done via <span class="caps">SSL </span>for encryption. The Hedwig server hubs also need to be <span class="caps">SSL </span>enabled for this to work. Default value is false. |<br />
| <code>max_message_size</code> | Sets the maximum message size in bytes. The default value is 2 MB (2097152). |<br />
| <code>max_server_redirects</code> | Sets the maximum number of redirects we permit before signaling an error. Default value is 2. |<br />
| <code>auto_send_consume_message_enabled</code> | A flag indicating whether the client library should automatically send consume messages to the server. Default value is true. |<br />
| <code>consumed_messages_buffer_size</code> | Sets the number of messages we buffer before sending a consume message to the server. Default value is 5. |<br />
| <code>max_outstanding_messages</code> | Support for client side throttling, sets the maximum number of outstanding messages. Default value is 10. |<br />
| <code>server_ack_response_timeout</code> | Sets the timeout (in milliseconds) before we error out any existing requests. Default value is 30s (30,000). |<br />
        </p>

    </div>
    <footer class="footer">
      <div class="container">
        <p class="text-muted">Copyright &copy; 2014 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.<br/>
	Apache BookKeeper, BookKeeper, Apache, Apache ZooKeeper, ZooKeeper, the Apache feather logo, and the Apache BookKeeper project logo are trademarks of The Apache Software Foundation.</p>
      </div>
    </footer>

    <script src="//code.jquery.com/jquery.js"></script>
    <script src="/archives/js/bootstrap.min.js"></script>
  </body>
</html>
