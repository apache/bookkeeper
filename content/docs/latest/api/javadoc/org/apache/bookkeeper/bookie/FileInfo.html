<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>FileInfo (Apache BookKeeper :: Parent 4.18.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FileInfo (Apache BookKeeper :: Parent 4.18.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileInfo.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.bookkeeper.bookie</a></div>
<h2 title="Class FileInfo" class="title">Class FileInfo</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../common/util/Watchable.html" title="class in org.apache.bookkeeper.common.util">org.apache.bookkeeper.common.util.Watchable</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;</li>
<li>
<ul class="inheritance">
<li>org.apache.bookkeeper.bookie.FileInfo</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../common/util/Recyclable.html" title="interface in org.apache.bookkeeper.common.util">Recyclable</a></code></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="FileInfoBackingCache.CachedFileInfo.html" title="class in org.apache.bookkeeper.bookie">FileInfoBackingCache.CachedFileInfo</a></code>, <code><a href="ReadOnlyFileInfo.html" title="class in org.apache.bookkeeper.bookie">ReadOnlyFileInfo</a></code></dd>
</dl>
<hr>
<pre>class <span class="typeNameLabel">FileInfo</span>
extends <a href="../common/util/Watchable.html" title="class in org.apache.bookkeeper.common.util">Watchable</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;</pre>
<div class="block">This is the file handle for a ledger's index file that maps entry ids to location.
 It is used by LedgerCache.

 <p>
 Ledger index file is made of a header and several fixed-length index pages, which records the offsets of data stored
 in entry loggers
 <pre>&lt;header&gt;&lt;index pages&gt;</pre>
 <b>Header</b> is formatted as below:
 <pre>&lt;magic bytes&gt;&lt;len of master key&gt;&lt;master key&gt;</pre>
 <ul>
 <li>magic bytes: 4 bytes, 'BKLE', version: 4 bytes
 <li>len of master key: indicates length of master key. -1 means no master key stored in header.
 <li>master key: master key
 <li>state: bit map to indicate the state, 32 bits.
 </ul>
 <b>Index page</b> is a fixed-length page, which contains several entries which point to the offsets of data stored
 in entry loggers.
 </p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FileInfo.FileInfoDeletedException.html" title="class in org.apache.bookkeeper.bookie">FileInfo.FileInfoDeletedException</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#CURRENT_HEADER_VERSION">CURRENT_HEADER_VERSION</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#headerVersion">headerVersion</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#masterKey">masterKey</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#mode">mode</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NO_MASTER_KEY">NO_MASTER_KEY</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SIGNATURE">SIGNATURE</a></span></code></th>
<td class="colLast">
<div class="block">The fingerprint of a ledger index file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#START_OF_DATA">START_OF_DATA</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#STATE_FENCED_BIT">STATE_FENCED_BIT</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#V0">V0</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#V1">V1</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.io.File,byte%5B%5D,int)">FileInfo</a></span>&#8203;(java.io.File&nbsp;lf,
        byte[]&nbsp;masterKey,
        int&nbsp;fileInfoVersionToWrite)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cancelWaitForLastAddConfirmedUpdate(org.apache.bookkeeper.common.util.Watcher)">cancelWaitForLastAddConfirmedUpdate</a></span>&#8203;(<a href="../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkOpen(boolean)">checkOpen</a></span>&#8203;(boolean&nbsp;create)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close(boolean)">close</a></span>&#8203;(boolean&nbsp;force)</code></th>
<td class="colLast">
<div class="block">Close a file info.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#delete()">delete</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flushHeader()">flushHeader</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>io.netty.buffer.ByteBuf</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getExplicitLac()">getExplicitLac</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>(package private) java.lang.Long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastAddConfirmed()">getLastAddConfirmed</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.io.File</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLf()">getLf</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMasterKey()">getMasterKey</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSizeSinceLastWrite()">getSizeSinceLastWrite</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isClosed()">isClosed</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isDeleted()">isDeleted</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isFenced()">isFenced</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isSameFile(java.io.File)">isSameFile</a></span>&#8203;(java.io.File&nbsp;f)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#moveToNewLocation(java.io.File,long)">moveToNewLocation</a></span>&#8203;(java.io.File&nbsp;newFile,
                 long&nbsp;size)</code></th>
<td class="colLast">
<div class="block">Copies current file contents upto specified size to the target file and
 deletes the current file.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#read(java.nio.ByteBuffer,long,boolean)">read</a></span>&#8203;(java.nio.ByteBuffer&nbsp;bb,
    long&nbsp;position,
    boolean&nbsp;bestEffort)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readHeader()">readHeader</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setExplicitLac(io.netty.buffer.ByteBuf)">setExplicitLac</a></span>&#8203;(io.netty.buffer.ByteBuf&nbsp;lac)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setFenced()">setFenced</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLastAddConfirmed(long)">setLastAddConfirmed</a></span>&#8203;(long&nbsp;lac)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#size()">size</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waitForLastAddConfirmedUpdate(long,org.apache.bookkeeper.common.util.Watcher)">waitForLastAddConfirmedUpdate</a></span>&#8203;(long&nbsp;previousLAC,
                             <a href="../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#write(java.nio.ByteBuffer%5B%5D,long)">write</a></span>&#8203;(java.nio.ByteBuffer[]&nbsp;buffs,
     long&nbsp;position)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.bookkeeper.common.util.Watchable">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.bookkeeper.common.util.<a href="../common/util/Watchable.html" title="class in org.apache.bookkeeper.common.util">Watchable</a></h3>
<code><a href="../common/util/Watchable.html#addWatcher(org.apache.bookkeeper.common.util.Watcher)">addWatcher</a>, <a href="../common/util/Watchable.html#deleteWatcher(org.apache.bookkeeper.common.util.Watcher)">deleteWatcher</a>, <a href="../common/util/Watchable.html#deleteWatchers()">deleteWatchers</a>, <a href="../common/util/Watchable.html#notifyWatchers(java.util.function.Function,R)">notifyWatchers</a>, <a href="../common/util/Watchable.html#recycle()">recycle</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="NO_MASTER_KEY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_MASTER_KEY</h4>
<pre>static final&nbsp;int NO_MASTER_KEY</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.bookkeeper.bookie.FileInfo.NO_MASTER_KEY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="STATE_FENCED_BIT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STATE_FENCED_BIT</h4>
<pre>static final&nbsp;int STATE_FENCED_BIT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.bookkeeper.bookie.FileInfo.STATE_FENCED_BIT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="masterKey">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>masterKey</h4>
<pre>byte[] masterKey</pre>
</li>
</ul>
<a id="SIGNATURE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SIGNATURE</h4>
<pre>public static final&nbsp;int SIGNATURE</pre>
<div class="block">The fingerprint of a ledger index file.</div>
</li>
</ul>
<a id="V0">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>V0</h4>
<pre>static final&nbsp;int V0</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.bookkeeper.bookie.FileInfo.V0">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="V1">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>V1</h4>
<pre>static final&nbsp;int V1</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.bookkeeper.bookie.FileInfo.V1">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="CURRENT_HEADER_VERSION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CURRENT_HEADER_VERSION</h4>
<pre>public static final&nbsp;int CURRENT_HEADER_VERSION</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.bookkeeper.bookie.FileInfo.CURRENT_HEADER_VERSION">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="START_OF_DATA">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>START_OF_DATA</h4>
<pre>static final&nbsp;long START_OF_DATA</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.bookkeeper.bookie.FileInfo.START_OF_DATA">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="mode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mode</h4>
<pre>protected&nbsp;java.lang.String mode</pre>
</li>
</ul>
<a id="headerVersion">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>headerVersion</h4>
<pre>int headerVersion</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.io.File,byte[],int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileInfo</h4>
<pre>public&nbsp;FileInfo&#8203;(java.io.File&nbsp;lf,
                byte[]&nbsp;masterKey,
                int&nbsp;fileInfoVersionToWrite)
         throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getLastAddConfirmed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastAddConfirmed</h4>
<pre class="methodSignature">java.lang.Long&nbsp;getLastAddConfirmed()</pre>
</li>
</ul>
<a id="setLastAddConfirmed(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLastAddConfirmed</h4>
<pre class="methodSignature">long&nbsp;setLastAddConfirmed&#8203;(long&nbsp;lac)</pre>
</li>
</ul>
<a id="waitForLastAddConfirmedUpdate(long,org.apache.bookkeeper.common.util.Watcher)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForLastAddConfirmedUpdate</h4>
<pre class="methodSignature">boolean&nbsp;waitForLastAddConfirmedUpdate&#8203;(long&nbsp;previousLAC,
                                      <a href="../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)</pre>
</li>
</ul>
<a id="cancelWaitForLastAddConfirmedUpdate(org.apache.bookkeeper.common.util.Watcher)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelWaitForLastAddConfirmedUpdate</h4>
<pre class="methodSignature">void&nbsp;cancelWaitForLastAddConfirmedUpdate&#8203;(<a href="../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)</pre>
</li>
</ul>
<a id="isClosed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isClosed</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isClosed()</pre>
</li>
</ul>
<a id="getLf()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLf</h4>
<pre class="methodSignature">public&nbsp;java.io.File&nbsp;getLf()</pre>
</li>
</ul>
<a id="getSizeSinceLastWrite()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSizeSinceLastWrite</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getSizeSinceLastWrite()</pre>
</li>
</ul>
<a id="getExplicitLac()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExplicitLac</h4>
<pre class="methodSignature">public&nbsp;io.netty.buffer.ByteBuf&nbsp;getExplicitLac()</pre>
</li>
</ul>
<a id="setExplicitLac(io.netty.buffer.ByteBuf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setExplicitLac</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setExplicitLac&#8203;(io.netty.buffer.ByteBuf&nbsp;lac)</pre>
</li>
</ul>
<a id="readHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readHeader</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;readHeader()
                throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="isDeleted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDeleted</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isDeleted()</pre>
</li>
</ul>
<a id="checkOpen(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkOpen</h4>
<pre class="methodSignature">void&nbsp;checkOpen&#8203;(boolean&nbsp;create)
        throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="isFenced()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFenced</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isFenced()
                 throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="setFenced()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFenced</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;setFenced()
                  throws java.io.IOException</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if set fence succeed, otherwise false when
 it already fenced or failed to set fenced.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="flushHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flushHeader</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;flushHeader()
                 throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="size()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;size()
          throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="read(java.nio.ByteBuffer,long,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;read&#8203;(java.nio.ByteBuffer&nbsp;bb,
                long&nbsp;position,
                boolean&nbsp;bestEffort)
         throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="close(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close&#8203;(boolean&nbsp;force)
           throws java.io.IOException</pre>
<div class="block">Close a file info. Generally, force should be set to true. If set to false metadata will not be flushed and
 accessing metadata before restart and recovery will be unsafe (since reloading from the index file will
 cause metadata to be lost). Setting force=false helps avoid expensive file create during shutdown with many
 dirty ledgers, and is safe because ledger metadata will be recovered before being accessed again.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>force</code> - if set to true, the index is forced to create before closed,
          if set to false, the index is not forced to create.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="write(java.nio.ByteBuffer[],long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;write&#8203;(java.nio.ByteBuffer[]&nbsp;buffs,
                  long&nbsp;position)
           throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="moveToNewLocation(java.io.File,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveToNewLocation</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;moveToNewLocation&#8203;(java.io.File&nbsp;newFile,
                              long&nbsp;size)
                       throws java.io.IOException</pre>
<div class="block">Copies current file contents upto specified size to the target file and
 deletes the current file. If size not known then pass size as
 Long.MAX_VALUE to copy complete file.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getMasterKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMasterKey</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;getMasterKey()
                    throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="delete()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;delete()</pre>
</li>
</ul>
<a id="isSameFile(java.io.File)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isSameFile</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isSameFile&#8203;(java.io.File&nbsp;f)</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileInfo.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2011&#x2013;2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
