<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>DbLedgerStorage (Apache BookKeeper :: Parent 4.18.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DbLedgerStorage (Apache BookKeeper :: Parent 4.18.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":9,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":9,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":9,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10,"i44":10,"i45":10,"i46":10,"i47":10,"i48":10,"i49":10,"i50":10,"i51":10,"i52":10,"i53":10,"i54":10,"i55":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DbLedgerStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.bookkeeper.bookie.storage.ldb</a></div>
<h2 title="Class DbLedgerStorage" class="title">Class DbLedgerStorage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">DbLedgerStorage</span>
extends java.lang.Object
implements <a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></pre>
<div class="block">Implementation of LedgerStorage that uses RocksDB to keep the indexes for entries stored in EntryLogs.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a id="nested.classes.inherited.from.class.org.apache.bookkeeper.bookie.LedgerStorage">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;org.apache.bookkeeper.bookie.<a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></h3>
<code><a href="../../LedgerStorage.DetectedInconsistency.html" title="class in org.apache.bookkeeper.bookie">LedgerStorage.DetectedInconsistency</a>, <a href="../../LedgerStorage.LedgerDeletionListener.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage.LedgerDeletionListener</a>, <a href="../../LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected io.netty.buffer.ByteBufAllocator</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#allocator">allocator</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DIRECT_IO_ENTRYLOGGER">DIRECT_IO_ENTRYLOGGER</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DIRECT_IO_ENTRYLOGGER_MAX_FD_CACHE_TIME_SECONDS">DIRECT_IO_ENTRYLOGGER_MAX_FD_CACHE_TIME_SECONDS</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DIRECT_IO_ENTRYLOGGER_READBUFFER_SIZE_MB">DIRECT_IO_ENTRYLOGGER_READBUFFER_SIZE_MB</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DIRECT_IO_ENTRYLOGGER_TOTAL_READBUFFER_SIZE_MB">DIRECT_IO_ENTRYLOGGER_TOTAL_READBUFFER_SIZE_MB</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DIRECT_IO_ENTRYLOGGER_TOTAL_WRITEBUFFER_SIZE_MB">DIRECT_IO_ENTRYLOGGER_TOTAL_WRITEBUFFER_SIZE_MB</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MAX_THROTTLE_TIME_MILLIS">MAX_THROTTLE_TIME_MILLIS</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#READ_AHEAD_CACHE_BATCH_BYTES_SIZE">READ_AHEAD_CACHE_BATCH_BYTES_SIZE</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#READ_AHEAD_CACHE_BATCH_SIZE">READ_AHEAD_CACHE_BATCH_SIZE</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#READ_AHEAD_CACHE_MAX_SIZE_MB">READ_AHEAD_CACHE_MAX_SIZE_MB</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#WRITE_CACHE_MAX_SIZE_MB">WRITE_CACHE_MAX_SIZE_MB</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">DbLedgerStorage</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addEntry(io.netty.buffer.ByteBuf)">addEntry</a></span>&#8203;(io.netty.buffer.ByteBuf&nbsp;entry)</code></th>
<td class="colLast">
<div class="block">Add an entry to the storage.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addLedgerToIndex(long,boolean,byte%5B%5D,org.apache.bookkeeper.bookie.LedgerCache.PageEntriesIterable)">addLedgerToIndex</a></span>&#8203;(long&nbsp;ledgerId,
                boolean&nbsp;isFenced,
                byte[]&nbsp;masterKey,
                <a href="../../LedgerCache.PageEntriesIterable.html" title="interface in org.apache.bookkeeper.bookie">LedgerCache.PageEntriesIterable</a>&nbsp;pages)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cancelWaitForLastAddConfirmedUpdate(long,org.apache.bookkeeper.common.util.Watcher)">cancelWaitForLastAddConfirmedUpdate</a></span>&#8203;(long&nbsp;ledgerId,
                                   <a href="../../../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="../../LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)</code></th>
<td class="colLast">
<div class="block">Cancel a previous wait for last add confirmed update.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkpoint(org.apache.bookkeeper.bookie.CheckpointSource.Checkpoint)">checkpoint</a></span>&#8203;(<a href="../../CheckpointSource.Checkpoint.html" title="interface in org.apache.bookkeeper.bookie">CheckpointSource.Checkpoint</a>&nbsp;checkpoint)</code></th>
<td class="colLast">
<div class="block">Ask the ledger storage to sync data until the given <i>checkpoint</i>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clearLimboState(long)">clearLimboState</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Clear the limbo state of a ledger.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clearStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">clearStorageStateFlag</a></span>&#8203;(<a href="../../LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&nbsp;flag)</code></th>
<td class="colLast">
<div class="block">Clear a storage state flag for the storage instance.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteLedger(long)">deleteLedger</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#entryExists(long,long)">entryExists</a></span>&#8203;(long&nbsp;ledgerId,
           long&nbsp;entryId)</code></th>
<td class="colLast">
<div class="block">Whether an entry exists.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#entryLocationCompact()">entryLocationCompact</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#entryLocationCompact(java.util.List)">entryLocationCompact</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;locations)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flush()">flush</a></span>()</code></th>
<td class="colLast">
<div class="block">Flushes all data in the storage.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forceGC()">forceGC</a></span>()</code></th>
<td class="colLast">
<div class="block">Force trigger Garbage Collection.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forceGC(boolean,boolean)">forceGC</a></span>&#8203;(boolean&nbsp;forceMajor,
       boolean&nbsp;forceMinor)</code></th>
<td class="colLast">
<div class="block">Force trigger Garbage Collection with forceMajor or forceMinor parameter.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.lang.Iterable&lt;java.lang.Long&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getActiveLedgersInRange(long,long)">getActiveLedgersInRange</a></span>&#8203;(long&nbsp;firstLedgerId,
                       long&nbsp;lastLedgerId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>(package private) static boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBooleanVariableOrDefault(org.apache.bookkeeper.conf.ServerConfiguration,java.lang.String,boolean)">getBooleanVariableOrDefault</a></span>&#8203;(<a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                           java.lang.String&nbsp;keyName,
                           boolean&nbsp;defaultValue)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>io.netty.buffer.ByteBuf</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEntry(long,long)">getEntry</a></span>&#8203;(long&nbsp;ledgerId,
        long&nbsp;entryId)</code></th>
<td class="colLast">
<div class="block">Read an entry from storage.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>java.util.List&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEntryLocationDBPath()">getEntryLocationDBPath</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>io.netty.buffer.ByteBuf</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getExplicitLac(long)">getExplicitLac</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../GarbageCollectionStatus.html" title="class in org.apache.bookkeeper.bookie">GarbageCollectionStatus</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGarbageCollectionStatus()">getGarbageCollectionStatus</a></span>()</code></th>
<td class="colLast">
<div class="block">Get Garbage Collection status.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastAddConfirmed(long)">getLastAddConfirmed</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Get last add confirmed.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>io.netty.buffer.ByteBuf</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastEntry(long)">getLastEntry</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastEntryInLedger(long)">getLastEntryInLedger</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="SingleDirectoryDbLedgerStorage.html" title="class in org.apache.bookkeeper.bookie.storage.ldb">SingleDirectoryDbLedgerStorage</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLedgerStorageList()">getLedgerStorageList</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>java.util.PrimitiveIterator.OfLong</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getListOfEntriesOfLedger(long)">getListOfEntriesOfLedger</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Returns the primitive long iterator for entries of the ledger, stored in
 this LedgerStorage.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLocation(long,long)">getLocation</a></span>&#8203;(long&nbsp;ledgerId,
           long&nbsp;entryId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>(package private) static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLongVariableOrDefault(org.apache.bookkeeper.conf.ServerConfiguration,java.lang.String,long)">getLongVariableOrDefault</a></span>&#8203;(<a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                        java.lang.String&nbsp;keyName,
                        long&nbsp;defaultValue)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>java.util.EnumSet&lt;<a href="../../LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getStorageStateFlags()">getStorageStateFlags</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the storage state flags currently set for the storage instance.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hasLimboState(long)">hasLimboState</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Check whether a ledger is in limbo state.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initialize(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.stats.StatsLogger,io.netty.buffer.ByteBufAllocator)">initialize</a></span>&#8203;(<a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
          <a href="../../../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
          <a href="../../LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
          <a href="../../LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;indexDirsManager,
          <a href="../../../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger,
          io.netty.buffer.ByteBufAllocator&nbsp;allocator)</code></th>
<td class="colLast">
<div class="block">Initialize the LedgerStorage implementation.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isEntryLocationCompacting()">isEntryLocationCompacting</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,&#8203;java.lang.Boolean&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isEntryLocationCompacting(java.util.List)">isEntryLocationCompacting</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;locations)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isFenced(long)">isFenced</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Check whether the ledger is fenced in ledger storage or not.</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isFlushRequired()">isFlushRequired</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isInForceGC()">isInForceGC</a></span>()</code></th>
<td class="colLast">
<div class="block">Whether force triggered Garbage Collection is running or not.</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isMajorGcSuspended()">isMajorGcSuspended</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isMinorGcSuspended()">isMinorGcSuspended</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ledgerExists(long)">ledgerExists</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Whether a ledger exists.</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>protected <a href="SingleDirectoryDbLedgerStorage.html" title="class in org.apache.bookkeeper.bookie.storage.ldb">SingleDirectoryDbLedgerStorage</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newSingleDirectoryDbLedgerStorage(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.storage.EntryLogger,org.apache.bookkeeper.stats.StatsLogger,long,long,int,long)">newSingleDirectoryDbLedgerStorage</a></span>&#8203;(<a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                                 <a href="../../../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
                                 <a href="../../LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
                                 <a href="../../LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;indexDirsManager,
                                 <a href="../EntryLogger.html" title="interface in org.apache.bookkeeper.bookie.storage">EntryLogger</a>&nbsp;entryLogger,
                                 <a href="../../../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger,
                                 long&nbsp;writeCacheSize,
                                 long&nbsp;readCacheSize,
                                 int&nbsp;readAheadCacheBatchSize,
                                 long&nbsp;readAheadCacheBatchBytesSize)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readLedgerIndexEntries(long,org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.bookie.storage.ldb.SingleDirectoryDbLedgerStorage.LedgerLoggerProcessor)">readLedgerIndexEntries</a></span>&#8203;(long&nbsp;ledgerId,
                      <a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;serverConf,
                      <a href="SingleDirectoryDbLedgerStorage.LedgerLoggerProcessor.html" title="interface in org.apache.bookkeeper.bookie.storage.ldb">SingleDirectoryDbLedgerStorage.LedgerLoggerProcessor</a>&nbsp;processor)</code></th>
<td class="colLast">
<div class="block">Reads ledger index entries to get list of entry-logger that contains given ledgerId.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readMasterKey(long)">readMasterKey</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Get the master key for a ledger.</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#registerLedgerDeletionListener(org.apache.bookkeeper.bookie.LedgerStorage.LedgerDeletionListener)">registerLedgerDeletionListener</a></span>&#8203;(<a href="../../LedgerStorage.LedgerDeletionListener.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage.LedgerDeletionListener</a>&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Register a listener for ledgers deletion notifications.</div>
</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resumeMajorGC()">resumeMajorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resumeMinorGC()">resumeMinorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setCheckpointer(org.apache.bookkeeper.bookie.Checkpointer)">setCheckpointer</a></span>&#8203;(<a href="../../Checkpointer.html" title="interface in org.apache.bookkeeper.bookie">Checkpointer</a>&nbsp;checkpointer)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setCheckpointSource(org.apache.bookkeeper.bookie.CheckpointSource)">setCheckpointSource</a></span>&#8203;(<a href="../../CheckpointSource.html" title="interface in org.apache.bookkeeper.bookie">CheckpointSource</a>&nbsp;checkpointSource)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setExplicitLac(long,io.netty.buffer.ByteBuf)">setExplicitLac</a></span>&#8203;(long&nbsp;ledgerId,
              io.netty.buffer.ByteBuf&nbsp;lac)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setFenced(long)">setFenced</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Fenced the ledger id in ledger storage.</div>
</td>
</tr>
<tr id="i47" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLimboState(long)">setLimboState</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Set a ledger to limbo state.</div>
</td>
</tr>
<tr id="i48" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMasterKey(long,byte%5B%5D)">setMasterKey</a></span>&#8203;(long&nbsp;ledgerId,
            byte[]&nbsp;masterKey)</code></th>
<td class="colLast">
<div class="block">Set the master key for a ledger.</div>
</td>
</tr>
<tr id="i49" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setStateManager(org.apache.bookkeeper.bookie.StateManager)">setStateManager</a></span>&#8203;(<a href="../../StateManager.html" title="interface in org.apache.bookkeeper.bookie">StateManager</a>&nbsp;stateManager)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i50" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">setStorageStateFlag</a></span>&#8203;(<a href="../../LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&nbsp;flag)</code></th>
<td class="colLast">
<div class="block">Set a storage state flag for the storage instance.</div>
</td>
</tr>
<tr id="i51" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shutdown()">shutdown</a></span>()</code></th>
<td class="colLast">
<div class="block">Cleanup and free any resources being used by the storage system.</div>
</td>
</tr>
<tr id="i52" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#start()">start</a></span>()</code></th>
<td class="colLast">
<div class="block">Start any background threads belonging to the storage system.</div>
</td>
</tr>
<tr id="i53" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#suspendMajorGC()">suspendMajorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i54" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#suspendMinorGC()">suspendMinorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i55" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waitForLastAddConfirmedUpdate(long,long,org.apache.bookkeeper.common.util.Watcher)">waitForLastAddConfirmedUpdate</a></span>&#8203;(long&nbsp;ledgerId,
                             long&nbsp;previousLAC,
                             <a href="../../../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="../../LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)</code></th>
<td class="colLast">
<div class="block">Wait for last add confirmed update.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.bookkeeper.bookie.LedgerStorage">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.bookkeeper.bookie.<a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></h3>
<code><a href="../../LedgerStorage.html#getUnderlyingLedgerStorage()">getUnderlyingLedgerStorage</a>, <a href="../../LedgerStorage.html#localConsistencyCheck(java.util.Optional)">localConsistencyCheck</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="WRITE_CACHE_MAX_SIZE_MB">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WRITE_CACHE_MAX_SIZE_MB</h4>
<pre>public static final&nbsp;java.lang.String WRITE_CACHE_MAX_SIZE_MB</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.WRITE_CACHE_MAX_SIZE_MB">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="READ_AHEAD_CACHE_MAX_SIZE_MB">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>READ_AHEAD_CACHE_MAX_SIZE_MB</h4>
<pre>public static final&nbsp;java.lang.String READ_AHEAD_CACHE_MAX_SIZE_MB</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.READ_AHEAD_CACHE_MAX_SIZE_MB">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="DIRECT_IO_ENTRYLOGGER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DIRECT_IO_ENTRYLOGGER</h4>
<pre>public static final&nbsp;java.lang.String DIRECT_IO_ENTRYLOGGER</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.DIRECT_IO_ENTRYLOGGER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="DIRECT_IO_ENTRYLOGGER_TOTAL_WRITEBUFFER_SIZE_MB">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DIRECT_IO_ENTRYLOGGER_TOTAL_WRITEBUFFER_SIZE_MB</h4>
<pre>public static final&nbsp;java.lang.String DIRECT_IO_ENTRYLOGGER_TOTAL_WRITEBUFFER_SIZE_MB</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.DIRECT_IO_ENTRYLOGGER_TOTAL_WRITEBUFFER_SIZE_MB">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="DIRECT_IO_ENTRYLOGGER_TOTAL_READBUFFER_SIZE_MB">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DIRECT_IO_ENTRYLOGGER_TOTAL_READBUFFER_SIZE_MB</h4>
<pre>public static final&nbsp;java.lang.String DIRECT_IO_ENTRYLOGGER_TOTAL_READBUFFER_SIZE_MB</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.DIRECT_IO_ENTRYLOGGER_TOTAL_READBUFFER_SIZE_MB">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="DIRECT_IO_ENTRYLOGGER_READBUFFER_SIZE_MB">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DIRECT_IO_ENTRYLOGGER_READBUFFER_SIZE_MB</h4>
<pre>public static final&nbsp;java.lang.String DIRECT_IO_ENTRYLOGGER_READBUFFER_SIZE_MB</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.DIRECT_IO_ENTRYLOGGER_READBUFFER_SIZE_MB">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="DIRECT_IO_ENTRYLOGGER_MAX_FD_CACHE_TIME_SECONDS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DIRECT_IO_ENTRYLOGGER_MAX_FD_CACHE_TIME_SECONDS</h4>
<pre>public static final&nbsp;java.lang.String DIRECT_IO_ENTRYLOGGER_MAX_FD_CACHE_TIME_SECONDS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.DIRECT_IO_ENTRYLOGGER_MAX_FD_CACHE_TIME_SECONDS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="MAX_THROTTLE_TIME_MILLIS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_THROTTLE_TIME_MILLIS</h4>
<pre>static final&nbsp;java.lang.String MAX_THROTTLE_TIME_MILLIS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.MAX_THROTTLE_TIME_MILLIS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="READ_AHEAD_CACHE_BATCH_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>READ_AHEAD_CACHE_BATCH_SIZE</h4>
<pre>static final&nbsp;java.lang.String READ_AHEAD_CACHE_BATCH_SIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.READ_AHEAD_CACHE_BATCH_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="READ_AHEAD_CACHE_BATCH_BYTES_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>READ_AHEAD_CACHE_BATCH_BYTES_SIZE</h4>
<pre>static final&nbsp;java.lang.String READ_AHEAD_CACHE_BATCH_BYTES_SIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.READ_AHEAD_CACHE_BATCH_BYTES_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="allocator">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>allocator</h4>
<pre>protected&nbsp;io.netty.buffer.ByteBufAllocator allocator</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DbLedgerStorage</h4>
<pre>public&nbsp;DbLedgerStorage()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="initialize(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.stats.StatsLogger,io.netty.buffer.ByteBufAllocator)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;initialize&#8203;(<a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                       <a href="../../../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
                       <a href="../../LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
                       <a href="../../LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;indexDirsManager,
                       <a href="../../../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger,
                       io.netty.buffer.ByteBufAllocator&nbsp;allocator)
                throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#initialize(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.stats.StatsLogger,io.netty.buffer.ByteBufAllocator)">LedgerStorage</a></code></span></div>
<div class="block">Initialize the LedgerStorage implementation.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#initialize(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.stats.StatsLogger,io.netty.buffer.ByteBufAllocator)">initialize</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="newSingleDirectoryDbLedgerStorage(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.storage.EntryLogger,org.apache.bookkeeper.stats.StatsLogger,long,long,int,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newSingleDirectoryDbLedgerStorage</h4>
<pre class="methodSignature">protected&nbsp;<a href="SingleDirectoryDbLedgerStorage.html" title="class in org.apache.bookkeeper.bookie.storage.ldb">SingleDirectoryDbLedgerStorage</a>&nbsp;newSingleDirectoryDbLedgerStorage&#8203;(<a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                                                                           <a href="../../../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
                                                                           <a href="../../LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
                                                                           <a href="../../LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;indexDirsManager,
                                                                           <a href="../EntryLogger.html" title="interface in org.apache.bookkeeper.bookie.storage">EntryLogger</a>&nbsp;entryLogger,
                                                                           <a href="../../../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger,
                                                                           long&nbsp;writeCacheSize,
                                                                           long&nbsp;readCacheSize,
                                                                           int&nbsp;readAheadCacheBatchSize,
                                                                           long&nbsp;readAheadCacheBatchBytesSize)
                                                                    throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="setStateManager(org.apache.bookkeeper.bookie.StateManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStateManager</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setStateManager&#8203;(<a href="../../StateManager.html" title="interface in org.apache.bookkeeper.bookie">StateManager</a>&nbsp;stateManager)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#setStateManager(org.apache.bookkeeper.bookie.StateManager)">setStateManager</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="setCheckpointSource(org.apache.bookkeeper.bookie.CheckpointSource)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCheckpointSource</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setCheckpointSource&#8203;(<a href="../../CheckpointSource.html" title="interface in org.apache.bookkeeper.bookie">CheckpointSource</a>&nbsp;checkpointSource)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#setCheckpointSource(org.apache.bookkeeper.bookie.CheckpointSource)">setCheckpointSource</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="setCheckpointer(org.apache.bookkeeper.bookie.Checkpointer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCheckpointer</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setCheckpointer&#8203;(<a href="../../Checkpointer.html" title="interface in org.apache.bookkeeper.bookie">Checkpointer</a>&nbsp;checkpointer)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#setCheckpointer(org.apache.bookkeeper.bookie.Checkpointer)">setCheckpointer</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;start()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#start()">LedgerStorage</a></code></span></div>
<div class="block">Start any background threads belonging to the storage system. For example, garbage collection.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#start()">start</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;shutdown()
              throws java.lang.InterruptedException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#shutdown()">LedgerStorage</a></code></span></div>
<div class="block">Cleanup and free any resources being used by the storage system.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#shutdown()">shutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
</dl>
</li>
</ul>
<a id="ledgerExists(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ledgerExists</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;ledgerExists&#8203;(long&nbsp;ledgerId)
                     throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#ledgerExists(long)">LedgerStorage</a></code></span></div>
<div class="block">Whether a ledger exists.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#ledgerExists(long)">ledgerExists</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="entryExists(long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entryExists</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;entryExists&#8203;(long&nbsp;ledgerId,
                           long&nbsp;entryId)
                    throws java.io.IOException,
                           <a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#entryExists(long,long)">LedgerStorage</a></code></span></div>
<div class="block">Whether an entry exists.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#entryExists(long,long)">entryExists</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="setFenced(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFenced</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;setFenced&#8203;(long&nbsp;ledgerId)
                  throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#setFenced(long)">LedgerStorage</a></code></span></div>
<div class="block">Fenced the ledger id in ledger storage.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#setFenced(long)">setFenced</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - Ledger Id.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - when failed to fence the ledger.</dd>
</dl>
</li>
</ul>
<a id="isFenced(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFenced</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isFenced&#8203;(long&nbsp;ledgerId)
                 throws java.io.IOException,
                        <a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#isFenced(long)">LedgerStorage</a></code></span></div>
<div class="block">Check whether the ledger is fenced in ledger storage or not.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#isFenced(long)">isFenced</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - Ledger ID.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="setMasterKey(long,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMasterKey</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setMasterKey&#8203;(long&nbsp;ledgerId,
                         byte[]&nbsp;masterKey)
                  throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#setMasterKey(long,byte%5B%5D)">LedgerStorage</a></code></span></div>
<div class="block">Set the master key for a ledger.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#setMasterKey(long,byte%5B%5D)">setMasterKey</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="readMasterKey(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readMasterKey</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;readMasterKey&#8203;(long&nbsp;ledgerId)
                     throws java.io.IOException,
                            <a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#readMasterKey(long)">LedgerStorage</a></code></span></div>
<div class="block">Get the master key for a ledger.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#readMasterKey(long)">readMasterKey</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if there is an error reading the from the ledger</dd>
<dd><code><a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code> - if no such ledger exists</dd>
</dl>
</li>
</ul>
<a id="addEntry(io.netty.buffer.ByteBuf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEntry</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;addEntry&#8203;(io.netty.buffer.ByteBuf&nbsp;entry)
              throws java.io.IOException,
                     <a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#addEntry(io.netty.buffer.ByteBuf)">LedgerStorage</a></code></span></div>
<div class="block">Add an entry to the storage.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#addEntry(io.netty.buffer.ByteBuf)">addEntry</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the entry id of the entry added</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="getEntry(long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntry</h4>
<pre class="methodSignature">public&nbsp;io.netty.buffer.ByteBuf&nbsp;getEntry&#8203;(long&nbsp;ledgerId,
                                        long&nbsp;entryId)
                                 throws java.io.IOException,
                                        <a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#getEntry(long,long)">LedgerStorage</a></code></span></div>
<div class="block">Read an entry from storage.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#getEntry(long,long)">getEntry</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="getLastAddConfirmed(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastAddConfirmed</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getLastAddConfirmed&#8203;(long&nbsp;ledgerId)
                         throws java.io.IOException,
                                <a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#getLastAddConfirmed(long)">LedgerStorage</a></code></span></div>
<div class="block">Get last add confirmed.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#getLastAddConfirmed(long)">getLastAddConfirmed</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - ledger id.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>last add confirmed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="waitForLastAddConfirmedUpdate(long,long,org.apache.bookkeeper.common.util.Watcher)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForLastAddConfirmedUpdate</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;waitForLastAddConfirmedUpdate&#8203;(long&nbsp;ledgerId,
                                             long&nbsp;previousLAC,
                                             <a href="../../../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="../../LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)
                                      throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#waitForLastAddConfirmedUpdate(long,long,org.apache.bookkeeper.common.util.Watcher)">LedgerStorage</a></code></span></div>
<div class="block">Wait for last add confirmed update.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#waitForLastAddConfirmedUpdate(long,long,org.apache.bookkeeper.common.util.Watcher)">waitForLastAddConfirmedUpdate</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dd><code>previousLAC</code> - - The threshold beyond which we would wait for the update</dd>
<dd><code>watcher</code> - - Watcher to notify on update</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="cancelWaitForLastAddConfirmedUpdate(long,org.apache.bookkeeper.common.util.Watcher)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelWaitForLastAddConfirmedUpdate</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;cancelWaitForLastAddConfirmedUpdate&#8203;(long&nbsp;ledgerId,
                                                <a href="../../../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="../../LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)
                                         throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#cancelWaitForLastAddConfirmedUpdate(long,org.apache.bookkeeper.common.util.Watcher)">LedgerStorage</a></code></span></div>
<div class="block">Cancel a previous wait for last add confirmed update.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#cancelWaitForLastAddConfirmedUpdate(long,org.apache.bookkeeper.common.util.Watcher)">cancelWaitForLastAddConfirmedUpdate</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - The ledger being watched.</dd>
<dd><code>watcher</code> - The watcher to cancel.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="flush()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;flush()
           throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#flush()">LedgerStorage</a></code></span></div>
<div class="block">Flushes all data in the storage. Once this is called,
 add data written to the LedgerStorage up until this point
 has been persisted to perminant storage</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#flush()">flush</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="checkpoint(org.apache.bookkeeper.bookie.CheckpointSource.Checkpoint)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpoint</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;checkpoint&#8203;(<a href="../../CheckpointSource.Checkpoint.html" title="interface in org.apache.bookkeeper.bookie">CheckpointSource.Checkpoint</a>&nbsp;checkpoint)
                throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#checkpoint(org.apache.bookkeeper.bookie.CheckpointSource.Checkpoint)">LedgerStorage</a></code></span></div>
<div class="block">Ask the ledger storage to sync data until the given <i>checkpoint</i>.
 The ledger storage implementation do checkpoint and return the real checkpoint
 that it finished. The returned the checkpoint indicates that all entries added
 before that point already persist.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#checkpoint(org.apache.bookkeeper.bookie.CheckpointSource.Checkpoint)">checkpoint</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>checkpoint</code> - Check Point that <a href="../../CheckpointSource.Checkpoint.html" title="interface in org.apache.bookkeeper.bookie"><code>CheckpointSource.Checkpoint</code></a> proposed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="deleteLedger(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteLedger</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteLedger&#8203;(long&nbsp;ledgerId)
                  throws java.io.IOException</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#deleteLedger(long)">deleteLedger</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="registerLedgerDeletionListener(org.apache.bookkeeper.bookie.LedgerStorage.LedgerDeletionListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerLedgerDeletionListener</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;registerLedgerDeletionListener&#8203;(<a href="../../LedgerStorage.LedgerDeletionListener.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage.LedgerDeletionListener</a>&nbsp;listener)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#registerLedgerDeletionListener(org.apache.bookkeeper.bookie.LedgerStorage.LedgerDeletionListener)">LedgerStorage</a></code></span></div>
<div class="block">Register a listener for ledgers deletion notifications.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#registerLedgerDeletionListener(org.apache.bookkeeper.bookie.LedgerStorage.LedgerDeletionListener)">registerLedgerDeletionListener</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - object that will be notified every time a ledger is deleted</dd>
</dl>
</li>
</ul>
<a id="setExplicitLac(long,io.netty.buffer.ByteBuf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setExplicitLac</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setExplicitLac&#8203;(long&nbsp;ledgerId,
                           io.netty.buffer.ByteBuf&nbsp;lac)
                    throws java.io.IOException</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#setExplicitLac(long,io.netty.buffer.ByteBuf)">setExplicitLac</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getExplicitLac(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExplicitLac</h4>
<pre class="methodSignature">public&nbsp;io.netty.buffer.ByteBuf&nbsp;getExplicitLac&#8203;(long&nbsp;ledgerId)
                                       throws java.io.IOException,
                                              <a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#getExplicitLac(long)">getExplicitLac</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="addLedgerToIndex(long,boolean,byte[],org.apache.bookkeeper.bookie.LedgerCache.PageEntriesIterable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addLedgerToIndex</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;addLedgerToIndex&#8203;(long&nbsp;ledgerId,
                             boolean&nbsp;isFenced,
                             byte[]&nbsp;masterKey,
                             <a href="../../LedgerCache.PageEntriesIterable.html" title="interface in org.apache.bookkeeper.bookie">LedgerCache.PageEntriesIterable</a>&nbsp;pages)
                      throws java.lang.Exception</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a id="getLastEntryInLedger(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastEntryInLedger</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getLastEntryInLedger&#8203;(long&nbsp;ledgerId)
                          throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getLocation(long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocation</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getLocation&#8203;(long&nbsp;ledgerId,
                        long&nbsp;entryId)
                 throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getActiveLedgersInRange(long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActiveLedgersInRange</h4>
<pre class="methodSignature">public&nbsp;java.lang.Iterable&lt;java.lang.Long&gt;&nbsp;getActiveLedgersInRange&#8203;(long&nbsp;firstLedgerId,
                                                                  long&nbsp;lastLedgerId)
                                                           throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getLastEntry(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastEntry</h4>
<pre class="methodSignature">public&nbsp;io.netty.buffer.ByteBuf&nbsp;getLastEntry&#8203;(long&nbsp;ledgerId)
                                     throws java.io.IOException,
                                            <a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="isFlushRequired()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFlushRequired</h4>
<pre class="methodSignature">boolean&nbsp;isFlushRequired()</pre>
</li>
</ul>
<a id="getLedgerStorageList()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLedgerStorageList</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="SingleDirectoryDbLedgerStorage.html" title="class in org.apache.bookkeeper.bookie.storage.ldb">SingleDirectoryDbLedgerStorage</a>&gt;&nbsp;getLedgerStorageList()</pre>
</li>
</ul>
<a id="readLedgerIndexEntries(long,org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.bookie.storage.ldb.SingleDirectoryDbLedgerStorage.LedgerLoggerProcessor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLedgerIndexEntries</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;readLedgerIndexEntries&#8203;(long&nbsp;ledgerId,
                                          <a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;serverConf,
                                          <a href="SingleDirectoryDbLedgerStorage.LedgerLoggerProcessor.html" title="interface in org.apache.bookkeeper.bookie.storage.ldb">SingleDirectoryDbLedgerStorage.LedgerLoggerProcessor</a>&nbsp;processor)
                                   throws java.io.IOException</pre>
<div class="block">Reads ledger index entries to get list of entry-logger that contains given ledgerId.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - </dd>
<dd><code>serverConf</code> - </dd>
<dd><code>processor</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="forceGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;forceGC()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#forceGC()">LedgerStorage</a></code></span></div>
<div class="block">Force trigger Garbage Collection.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#forceGC()">forceGC</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="forceGC(boolean,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;forceGC&#8203;(boolean&nbsp;forceMajor,
                    boolean&nbsp;forceMinor)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#forceGC(boolean,boolean)">LedgerStorage</a></code></span></div>
<div class="block">Force trigger Garbage Collection with forceMajor or forceMinor parameter.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#forceGC(boolean,boolean)">forceGC</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="isInForceGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInForceGC</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isInForceGC()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#isInForceGC()">LedgerStorage</a></code></span></div>
<div class="block">Whether force triggered Garbage Collection is running or not.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#isInForceGC()">isInForceGC</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true  -- force triggered Garbage Collection is running,
      false -- force triggered Garbage Collection is not running</dd>
</dl>
</li>
</ul>
<a id="suspendMinorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspendMinorGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;suspendMinorGC()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#suspendMinorGC()">suspendMinorGC</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="suspendMajorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspendMajorGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;suspendMajorGC()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#suspendMajorGC()">suspendMajorGC</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="resumeMinorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resumeMinorGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;resumeMinorGC()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#resumeMinorGC()">resumeMinorGC</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="resumeMajorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resumeMajorGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;resumeMajorGC()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#resumeMajorGC()">resumeMajorGC</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="isMajorGcSuspended()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMajorGcSuspended</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isMajorGcSuspended()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#isMajorGcSuspended()">isMajorGcSuspended</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="isMinorGcSuspended()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMinorGcSuspended</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isMinorGcSuspended()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#isMinorGcSuspended()">isMinorGcSuspended</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="entryLocationCompact()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entryLocationCompact</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;entryLocationCompact()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#entryLocationCompact()">entryLocationCompact</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="entryLocationCompact(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entryLocationCompact</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;entryLocationCompact&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;locations)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#entryLocationCompact(java.util.List)">entryLocationCompact</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="isEntryLocationCompacting()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEntryLocationCompacting</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isEntryLocationCompacting()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#isEntryLocationCompacting()">isEntryLocationCompacting</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="isEntryLocationCompacting(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEntryLocationCompacting</h4>
<pre class="methodSignature">public&nbsp;java.util.Map&lt;java.lang.String,&#8203;java.lang.Boolean&gt;&nbsp;isEntryLocationCompacting&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;locations)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#isEntryLocationCompacting(java.util.List)">isEntryLocationCompacting</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="getEntryLocationDBPath()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryLocationDBPath</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;java.lang.String&gt;&nbsp;getEntryLocationDBPath()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#getEntryLocationDBPath()">getEntryLocationDBPath</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="getGarbageCollectionStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGarbageCollectionStatus</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../../GarbageCollectionStatus.html" title="class in org.apache.bookkeeper.bookie">GarbageCollectionStatus</a>&gt;&nbsp;getGarbageCollectionStatus()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#getGarbageCollectionStatus()">LedgerStorage</a></code></span></div>
<div class="block">Get Garbage Collection status.
 Since DbLedgerStorage is a list of storage instances, we should return a list.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#getGarbageCollectionStatus()">getGarbageCollectionStatus</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
</dl>
</li>
</ul>
<a id="getLongVariableOrDefault(org.apache.bookkeeper.conf.ServerConfiguration,java.lang.String,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLongVariableOrDefault</h4>
<pre class="methodSignature">static&nbsp;long&nbsp;getLongVariableOrDefault&#8203;(<a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                                     java.lang.String&nbsp;keyName,
                                     long&nbsp;defaultValue)</pre>
</li>
</ul>
<a id="getBooleanVariableOrDefault(org.apache.bookkeeper.conf.ServerConfiguration,java.lang.String,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBooleanVariableOrDefault</h4>
<pre class="methodSignature">static&nbsp;boolean&nbsp;getBooleanVariableOrDefault&#8203;(<a href="../../../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                                           java.lang.String&nbsp;keyName,
                                           boolean&nbsp;defaultValue)</pre>
</li>
</ul>
<a id="getListOfEntriesOfLedger(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getListOfEntriesOfLedger</h4>
<pre class="methodSignature">public&nbsp;java.util.PrimitiveIterator.OfLong&nbsp;getListOfEntriesOfLedger&#8203;(long&nbsp;ledgerId)
                                                            throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#getListOfEntriesOfLedger(long)">LedgerStorage</a></code></span></div>
<div class="block">Returns the primitive long iterator for entries of the ledger, stored in
 this LedgerStorage. The returned iterator provide weakly consistent state
 of the ledger. It is guaranteed that entries of the ledger added to this
 LedgerStorage by the time this method is called will be available but
 modifications made after method invocation may not be available.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#getListOfEntriesOfLedger(long)">getListOfEntriesOfLedger</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - - id of the ledger</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the list of entries of the ledger available in this
         ledgerstorage.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="setLimboState(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLimboState</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setLimboState&#8203;(long&nbsp;ledgerId)
                   throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#setLimboState(long)">LedgerStorage</a></code></span></div>
<div class="block">Set a ledger to limbo state.
 When a ledger is in limbo state, we cannot answer any requests about it.
 For example, if a client asks for an entry, we cannot say we don't have it because
 it may have been written to us in the past, but we are waiting for data integrity checks
 to copy it over.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#setLimboState(long)">setLimboState</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="hasLimboState(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasLimboState</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;hasLimboState&#8203;(long&nbsp;ledgerId)
                      throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#hasLimboState(long)">LedgerStorage</a></code></span></div>
<div class="block">Check whether a ledger is in limbo state.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#hasLimboState(long)">hasLimboState</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../LedgerStorage.html#setLimboState(long)"><code>LedgerStorage.setLimboState(long)</code></a></dd>
</dl>
</li>
</ul>
<a id="clearLimboState(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearLimboState</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;clearLimboState&#8203;(long&nbsp;ledgerId)
                     throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#clearLimboState(long)">LedgerStorage</a></code></span></div>
<div class="block">Clear the limbo state of a ledger.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#clearLimboState(long)">clearLimboState</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../LedgerStorage.html#setLimboState(long)"><code>LedgerStorage.setLimboState(long)</code></a></dd>
</dl>
</li>
</ul>
<a id="getStorageStateFlags()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageStateFlags</h4>
<pre class="methodSignature">public&nbsp;java.util.EnumSet&lt;<a href="../../LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&gt;&nbsp;getStorageStateFlags()
                                                                   throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#getStorageStateFlags()">LedgerStorage</a></code></span></div>
<div class="block">Get the storage state flags currently set for the storage instance.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#getStorageStateFlags()">getStorageStateFlags</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="setStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStorageStateFlag</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setStorageStateFlag&#8203;(<a href="../../LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&nbsp;flag)
                         throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#setStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">LedgerStorage</a></code></span></div>
<div class="block">Set a storage state flag for the storage instance.
 Implementations must ensure this method is atomic, and the flag
 is persisted to storage when the method returns.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#setStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">setStorageStateFlag</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="clearStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>clearStorageStateFlag</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;clearStorageStateFlag&#8203;(<a href="../../LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&nbsp;flag)
                           throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../LedgerStorage.html#clearStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">LedgerStorage</a></code></span></div>
<div class="block">Clear a storage state flag for the storage instance.
 Implementations must ensure this method is atomic, and the flag
 is persisted to storage when the method returns.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../LedgerStorage.html#clearStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">clearStorageStateFlag</a></code>&nbsp;in interface&nbsp;<code><a href="../../LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DbLedgerStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2011&#x2013;2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
