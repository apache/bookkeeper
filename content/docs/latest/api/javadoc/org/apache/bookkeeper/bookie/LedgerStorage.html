<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>LedgerStorage (Apache BookKeeper :: Parent 4.18.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LedgerStorage (Apache BookKeeper :: Parent 4.18.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":18,"i8":18,"i9":6,"i10":18,"i11":18,"i12":6,"i13":18,"i14":6,"i15":18,"i16":6,"i17":6,"i18":6,"i19":18,"i20":6,"i21":6,"i22":18,"i23":18,"i24":6,"i25":18,"i26":18,"i27":18,"i28":6,"i29":18,"i30":6,"i31":6,"i32":18,"i33":18,"i34":6,"i35":6,"i36":6,"i37":6,"i38":6,"i39":6,"i40":6,"i41":6,"i42":6,"i43":6,"i44":18,"i45":18,"i46":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LedgerStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.bookkeeper.bookie</a></div>
<h2 title="Interface LedgerStorage" class="title">Interface LedgerStorage</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="CompactableLedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">CompactableLedgerStorage</a></code></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="storage/ldb/DbLedgerStorage.html" title="class in org.apache.bookkeeper.bookie.storage.ldb">DbLedgerStorage</a></code>, <code><a href="InterleavedLedgerStorage.html" title="class in org.apache.bookkeeper.bookie">InterleavedLedgerStorage</a></code>, <code><a href="storage/ldb/SingleDirectoryDbLedgerStorage.html" title="class in org.apache.bookkeeper.bookie.storage.ldb">SingleDirectoryDbLedgerStorage</a></code>, <code><a href="SortedLedgerStorage.html" title="class in org.apache.bookkeeper.bookie">SortedLedgerStorage</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">LedgerStorage</span></pre>
<div class="block">Interface for storing ledger data on persistent storage.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="LedgerStorage.DetectedInconsistency.html" title="class in org.apache.bookkeeper.bookie">LedgerStorage.DetectedInconsistency</a></span></code></th>
<td class="colLast">
<div class="block">Class for describing location of a generic inconsistency.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="LedgerStorage.LedgerDeletionListener.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage.LedgerDeletionListener</a></span></code></th>
<td class="colLast">
<div class="block">Signals that a ledger is deleted by the garbage collection thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a></span></code></th>
<td class="colLast">
<div class="block">StorageState flags.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addEntry(io.netty.buffer.ByteBuf)">addEntry</a></span>&#8203;(io.netty.buffer.ByteBuf&nbsp;entry)</code></th>
<td class="colLast">
<div class="block">Add an entry to the storage.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cancelWaitForLastAddConfirmedUpdate(long,org.apache.bookkeeper.common.util.Watcher)">cancelWaitForLastAddConfirmedUpdate</a></span>&#8203;(long&nbsp;ledgerId,
                                   <a href="../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)</code></th>
<td class="colLast">
<div class="block">Cancel a previous wait for last add confirmed update.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkpoint(org.apache.bookkeeper.bookie.CheckpointSource.Checkpoint)">checkpoint</a></span>&#8203;(<a href="CheckpointSource.Checkpoint.html" title="interface in org.apache.bookkeeper.bookie">CheckpointSource.Checkpoint</a>&nbsp;checkpoint)</code></th>
<td class="colLast">
<div class="block">Ask the ledger storage to sync data until the given <i>checkpoint</i>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clearLimboState(long)">clearLimboState</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Clear the limbo state of a ledger.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clearStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">clearStorageStateFlag</a></span>&#8203;(<a href="LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&nbsp;flags)</code></th>
<td class="colLast">
<div class="block">Clear a storage state flag for the storage instance.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteLedger(long)">deleteLedger</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#entryExists(long,long)">entryExists</a></span>&#8203;(long&nbsp;ledgerId,
           long&nbsp;entryId)</code></th>
<td class="colLast">
<div class="block">Whether an entry exists.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#entryLocationCompact()">entryLocationCompact</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#entryLocationCompact(java.util.List)">entryLocationCompact</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;locations)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flush()">flush</a></span>()</code></th>
<td class="colLast">
<div class="block">Flushes all data in the storage.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forceGC()">forceGC</a></span>()</code></th>
<td class="colLast">
<div class="block">Force trigger Garbage Collection.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forceGC(boolean,boolean)">forceGC</a></span>&#8203;(boolean&nbsp;forceMajor,
       boolean&nbsp;forceMinor)</code></th>
<td class="colLast">
<div class="block">Force trigger Garbage Collection with forceMajor or forceMinor parameter.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>io.netty.buffer.ByteBuf</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEntry(long,long)">getEntry</a></span>&#8203;(long&nbsp;ledgerId,
        long&nbsp;entryId)</code></th>
<td class="colLast">
<div class="block">Read an entry from storage.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>default java.util.List&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEntryLocationDBPath()">getEntryLocationDBPath</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>io.netty.buffer.ByteBuf</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getExplicitLac(long)">getExplicitLac</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>default java.util.List&lt;<a href="GarbageCollectionStatus.html" title="class in org.apache.bookkeeper.bookie">GarbageCollectionStatus</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGarbageCollectionStatus()">getGarbageCollectionStatus</a></span>()</code></th>
<td class="colLast">
<div class="block">Get Garbage Collection status.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastAddConfirmed(long)">getLastAddConfirmed</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Get last add confirmed.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>java.util.PrimitiveIterator.OfLong</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getListOfEntriesOfLedger(long)">getListOfEntriesOfLedger</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Returns the primitive long iterator for entries of the ledger, stored in
 this LedgerStorage.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>java.util.EnumSet&lt;<a href="LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getStorageStateFlags()">getStorageStateFlags</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the storage state flags currently set for the storage instance.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>default <a href="LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUnderlyingLedgerStorage()">getUnderlyingLedgerStorage</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hasLimboState(long)">hasLimboState</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Check whether a ledger is in limbo state.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initialize(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.stats.StatsLogger,io.netty.buffer.ByteBufAllocator)">initialize</a></span>&#8203;(<a href="../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
          <a href="../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
          <a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
          <a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;indexDirsManager,
          <a href="../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger,
          io.netty.buffer.ByteBufAllocator&nbsp;allocator)</code></th>
<td class="colLast">
<div class="block">Initialize the LedgerStorage implementation.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isEntryLocationCompacting()">isEntryLocationCompacting</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>default java.util.Map&lt;java.lang.String,&#8203;java.lang.Boolean&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isEntryLocationCompacting(java.util.List)">isEntryLocationCompacting</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;locations)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isFenced(long)">isFenced</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Check whether the ledger is fenced in ledger storage or not.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isInForceGC()">isInForceGC</a></span>()</code></th>
<td class="colLast">
<div class="block">Whether force triggered Garbage Collection is running or not.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isMajorGcSuspended()">isMajorGcSuspended</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isMinorGcSuspended()">isMinorGcSuspended</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ledgerExists(long)">ledgerExists</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Whether a ledger exists.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>default java.util.List&lt;<a href="LedgerStorage.DetectedInconsistency.html" title="class in org.apache.bookkeeper.bookie">LedgerStorage.DetectedInconsistency</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#localConsistencyCheck(java.util.Optional)">localConsistencyCheck</a></span>&#8203;(java.util.Optional&lt;com.google.common.util.concurrent.RateLimiter&gt;&nbsp;rateLimiter)</code></th>
<td class="colLast">
<div class="block">Performs internal check of local storage logging any inconsistencies.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readMasterKey(long)">readMasterKey</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Get the master key for a ledger.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#registerLedgerDeletionListener(org.apache.bookkeeper.bookie.LedgerStorage.LedgerDeletionListener)">registerLedgerDeletionListener</a></span>&#8203;(<a href="LedgerStorage.LedgerDeletionListener.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage.LedgerDeletionListener</a>&nbsp;listener)</code></th>
<td class="colLast">
<div class="block">Register a listener for ledgers deletion notifications.</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resumeMajorGC()">resumeMajorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resumeMinorGC()">resumeMinorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setCheckpointer(org.apache.bookkeeper.bookie.Checkpointer)">setCheckpointer</a></span>&#8203;(<a href="Checkpointer.html" title="interface in org.apache.bookkeeper.bookie">Checkpointer</a>&nbsp;checkpointer)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setCheckpointSource(org.apache.bookkeeper.bookie.CheckpointSource)">setCheckpointSource</a></span>&#8203;(<a href="CheckpointSource.html" title="interface in org.apache.bookkeeper.bookie">CheckpointSource</a>&nbsp;checkpointSource)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setExplicitLac(long,io.netty.buffer.ByteBuf)">setExplicitLac</a></span>&#8203;(long&nbsp;ledgerId,
              io.netty.buffer.ByteBuf&nbsp;lac)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setFenced(long)">setFenced</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Fenced the ledger id in ledger storage.</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLimboState(long)">setLimboState</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Set a ledger to limbo state.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMasterKey(long,byte%5B%5D)">setMasterKey</a></span>&#8203;(long&nbsp;ledgerId,
            byte[]&nbsp;masterKey)</code></th>
<td class="colLast">
<div class="block">Set the master key for a ledger.</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setStateManager(org.apache.bookkeeper.bookie.StateManager)">setStateManager</a></span>&#8203;(<a href="StateManager.html" title="interface in org.apache.bookkeeper.bookie">StateManager</a>&nbsp;stateManager)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">setStorageStateFlag</a></span>&#8203;(<a href="LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&nbsp;flags)</code></th>
<td class="colLast">
<div class="block">Set a storage state flag for the storage instance.</div>
</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shutdown()">shutdown</a></span>()</code></th>
<td class="colLast">
<div class="block">Cleanup and free any resources being used by the storage system.</div>
</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#start()">start</a></span>()</code></th>
<td class="colLast">
<div class="block">Start any background threads belonging to the storage system.</div>
</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#suspendMajorGC()">suspendMajorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#suspendMinorGC()">suspendMinorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waitForLastAddConfirmedUpdate(long,long,org.apache.bookkeeper.common.util.Watcher)">waitForLastAddConfirmedUpdate</a></span>&#8203;(long&nbsp;ledgerId,
                             long&nbsp;previousLAC,
                             <a href="../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)</code></th>
<td class="colLast">
<div class="block">Wait for last add confirmed update.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="initialize(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.stats.StatsLogger,io.netty.buffer.ByteBufAllocator)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre class="methodSignature">void&nbsp;initialize&#8203;(<a href="../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                <a href="../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
                <a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
                <a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;indexDirsManager,
                <a href="../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger,
                io.netty.buffer.ByteBufAllocator&nbsp;allocator)
         throws java.io.IOException</pre>
<div class="block">Initialize the LedgerStorage implementation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>conf</code> - </dd>
<dd><code>ledgerManager</code> - </dd>
<dd><code>ledgerDirsManager</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="setStateManager(org.apache.bookkeeper.bookie.StateManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStateManager</h4>
<pre class="methodSignature">void&nbsp;setStateManager&#8203;(<a href="StateManager.html" title="interface in org.apache.bookkeeper.bookie">StateManager</a>&nbsp;stateManager)</pre>
</li>
</ul>
<a id="setCheckpointSource(org.apache.bookkeeper.bookie.CheckpointSource)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCheckpointSource</h4>
<pre class="methodSignature">void&nbsp;setCheckpointSource&#8203;(<a href="CheckpointSource.html" title="interface in org.apache.bookkeeper.bookie">CheckpointSource</a>&nbsp;checkpointSource)</pre>
</li>
</ul>
<a id="setCheckpointer(org.apache.bookkeeper.bookie.Checkpointer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCheckpointer</h4>
<pre class="methodSignature">void&nbsp;setCheckpointer&#8203;(<a href="Checkpointer.html" title="interface in org.apache.bookkeeper.bookie">Checkpointer</a>&nbsp;checkpointer)</pre>
</li>
</ul>
<a id="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre class="methodSignature">void&nbsp;start()</pre>
<div class="block">Start any background threads belonging to the storage system. For example, garbage collection.</div>
</li>
</ul>
<a id="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre class="methodSignature">void&nbsp;shutdown()
       throws java.lang.InterruptedException</pre>
<div class="block">Cleanup and free any resources being used by the storage system.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
</dl>
</li>
</ul>
<a id="ledgerExists(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ledgerExists</h4>
<pre class="methodSignature">boolean&nbsp;ledgerExists&#8203;(long&nbsp;ledgerId)
              throws java.io.IOException</pre>
<div class="block">Whether a ledger exists.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="entryExists(long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entryExists</h4>
<pre class="methodSignature">boolean&nbsp;entryExists&#8203;(long&nbsp;ledgerId,
                    long&nbsp;entryId)
             throws java.io.IOException,
                    <a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block">Whether an entry exists.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="setFenced(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFenced</h4>
<pre class="methodSignature">boolean&nbsp;setFenced&#8203;(long&nbsp;ledgerId)
           throws java.io.IOException</pre>
<div class="block">Fenced the ledger id in ledger storage.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - Ledger Id.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - when failed to fence the ledger.</dd>
</dl>
</li>
</ul>
<a id="isFenced(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFenced</h4>
<pre class="methodSignature">boolean&nbsp;isFenced&#8203;(long&nbsp;ledgerId)
          throws java.io.IOException,
                 <a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block">Check whether the ledger is fenced in ledger storage or not.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - Ledger ID.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="setLimboState(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLimboState</h4>
<pre class="methodSignature">void&nbsp;setLimboState&#8203;(long&nbsp;ledgerId)
            throws java.io.IOException</pre>
<div class="block">Set a ledger to limbo state.
 When a ledger is in limbo state, we cannot answer any requests about it.
 For example, if a client asks for an entry, we cannot say we don't have it because
 it may have been written to us in the past, but we are waiting for data integrity checks
 to copy it over.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="hasLimboState(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasLimboState</h4>
<pre class="methodSignature">boolean&nbsp;hasLimboState&#8203;(long&nbsp;ledgerId)
               throws java.io.IOException</pre>
<div class="block">Check whether a ledger is in limbo state.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setLimboState(long)"><code>setLimboState(long)</code></a></dd>
</dl>
</li>
</ul>
<a id="clearLimboState(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearLimboState</h4>
<pre class="methodSignature">void&nbsp;clearLimboState&#8203;(long&nbsp;ledgerId)
              throws java.io.IOException</pre>
<div class="block">Clear the limbo state of a ledger.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#setLimboState(long)"><code>setLimboState(long)</code></a></dd>
</dl>
</li>
</ul>
<a id="setMasterKey(long,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMasterKey</h4>
<pre class="methodSignature">void&nbsp;setMasterKey&#8203;(long&nbsp;ledgerId,
                  byte[]&nbsp;masterKey)
           throws java.io.IOException</pre>
<div class="block">Set the master key for a ledger.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="readMasterKey(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readMasterKey</h4>
<pre class="methodSignature">byte[]&nbsp;readMasterKey&#8203;(long&nbsp;ledgerId)
              throws java.io.IOException,
                     <a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block">Get the master key for a ledger.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if there is an error reading the from the ledger</dd>
<dd><code><a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code> - if no such ledger exists</dd>
</dl>
</li>
</ul>
<a id="addEntry(io.netty.buffer.ByteBuf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEntry</h4>
<pre class="methodSignature">long&nbsp;addEntry&#8203;(io.netty.buffer.ByteBuf&nbsp;entry)
       throws java.io.IOException,
              <a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block">Add an entry to the storage.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the entry id of the entry added</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="getEntry(long,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntry</h4>
<pre class="methodSignature">io.netty.buffer.ByteBuf&nbsp;getEntry&#8203;(long&nbsp;ledgerId,
                                 long&nbsp;entryId)
                          throws java.io.IOException,
                                 <a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block">Read an entry from storage.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="getLastAddConfirmed(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastAddConfirmed</h4>
<pre class="methodSignature">long&nbsp;getLastAddConfirmed&#8203;(long&nbsp;ledgerId)
                  throws java.io.IOException,
                         <a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<div class="block">Get last add confirmed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - ledger id.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>last add confirmed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="waitForLastAddConfirmedUpdate(long,long,org.apache.bookkeeper.common.util.Watcher)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForLastAddConfirmedUpdate</h4>
<pre class="methodSignature">boolean&nbsp;waitForLastAddConfirmedUpdate&#8203;(long&nbsp;ledgerId,
                                      long&nbsp;previousLAC,
                                      <a href="../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)
                               throws java.io.IOException</pre>
<div class="block">Wait for last add confirmed update.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>previousLAC</code> - - The threshold beyond which we would wait for the update</dd>
<dd><code>watcher</code> - - Watcher to notify on update</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="cancelWaitForLastAddConfirmedUpdate(long,org.apache.bookkeeper.common.util.Watcher)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelWaitForLastAddConfirmedUpdate</h4>
<pre class="methodSignature">void&nbsp;cancelWaitForLastAddConfirmedUpdate&#8203;(long&nbsp;ledgerId,
                                         <a href="../common/util/Watcher.html" title="interface in org.apache.bookkeeper.common.util">Watcher</a>&lt;<a href="LastAddConfirmedUpdateNotification.html" title="class in org.apache.bookkeeper.bookie">LastAddConfirmedUpdateNotification</a>&gt;&nbsp;watcher)
                                  throws java.io.IOException</pre>
<div class="block">Cancel a previous wait for last add confirmed update.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - The ledger being watched.</dd>
<dd><code>watcher</code> - The watcher to cancel.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="flush()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre class="methodSignature">void&nbsp;flush()
    throws java.io.IOException</pre>
<div class="block">Flushes all data in the storage. Once this is called,
 add data written to the LedgerStorage up until this point
 has been persisted to perminant storage</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="checkpoint(org.apache.bookkeeper.bookie.CheckpointSource.Checkpoint)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpoint</h4>
<pre class="methodSignature">void&nbsp;checkpoint&#8203;(<a href="CheckpointSource.Checkpoint.html" title="interface in org.apache.bookkeeper.bookie">CheckpointSource.Checkpoint</a>&nbsp;checkpoint)
         throws java.io.IOException</pre>
<div class="block">Ask the ledger storage to sync data until the given <i>checkpoint</i>.
 The ledger storage implementation do checkpoint and return the real checkpoint
 that it finished. The returned the checkpoint indicates that all entries added
 before that point already persist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>checkpoint</code> - Check Point that <a href="CheckpointSource.Checkpoint.html" title="interface in org.apache.bookkeeper.bookie"><code>CheckpointSource.Checkpoint</code></a> proposed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="deleteLedger(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteLedger</h4>
<pre class="methodSignature">void&nbsp;deleteLedger&#8203;(long&nbsp;ledgerId)
           throws java.io.IOException</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="registerLedgerDeletionListener(org.apache.bookkeeper.bookie.LedgerStorage.LedgerDeletionListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerLedgerDeletionListener</h4>
<pre class="methodSignature">void&nbsp;registerLedgerDeletionListener&#8203;(<a href="LedgerStorage.LedgerDeletionListener.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage.LedgerDeletionListener</a>&nbsp;listener)</pre>
<div class="block">Register a listener for ledgers deletion notifications.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - object that will be notified every time a ledger is deleted</dd>
</dl>
</li>
</ul>
<a id="setExplicitLac(long,io.netty.buffer.ByteBuf)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setExplicitLac</h4>
<pre class="methodSignature">void&nbsp;setExplicitLac&#8203;(long&nbsp;ledgerId,
                    io.netty.buffer.ByteBuf&nbsp;lac)
             throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getExplicitLac(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExplicitLac</h4>
<pre class="methodSignature">io.netty.buffer.ByteBuf&nbsp;getExplicitLac&#8203;(long&nbsp;ledgerId)
                                throws java.io.IOException,
                                       <a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="BookieException.html" title="class in org.apache.bookkeeper.bookie">BookieException</a></code></dd>
</dl>
</li>
</ul>
<a id="getUnderlyingLedgerStorage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUnderlyingLedgerStorage</h4>
<pre class="methodSignature">default&nbsp;<a href="LedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">LedgerStorage</a>&nbsp;getUnderlyingLedgerStorage()</pre>
</li>
</ul>
<a id="forceGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceGC</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;forceGC()</pre>
<div class="block">Force trigger Garbage Collection.</div>
</li>
</ul>
<a id="forceGC(boolean,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceGC</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;forceGC&#8203;(boolean&nbsp;forceMajor,
                     boolean&nbsp;forceMinor)</pre>
<div class="block">Force trigger Garbage Collection with forceMajor or forceMinor parameter.</div>
</li>
</ul>
<a id="suspendMinorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspendMinorGC</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;suspendMinorGC()</pre>
</li>
</ul>
<a id="suspendMajorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspendMajorGC</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;suspendMajorGC()</pre>
</li>
</ul>
<a id="resumeMinorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resumeMinorGC</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;resumeMinorGC()</pre>
</li>
</ul>
<a id="resumeMajorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resumeMajorGC</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;resumeMajorGC()</pre>
</li>
</ul>
<a id="isMajorGcSuspended()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMajorGcSuspended</h4>
<pre class="methodSignature">default&nbsp;boolean&nbsp;isMajorGcSuspended()</pre>
</li>
</ul>
<a id="isMinorGcSuspended()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMinorGcSuspended</h4>
<pre class="methodSignature">default&nbsp;boolean&nbsp;isMinorGcSuspended()</pre>
</li>
</ul>
<a id="entryLocationCompact()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entryLocationCompact</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;entryLocationCompact()</pre>
</li>
</ul>
<a id="entryLocationCompact(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entryLocationCompact</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;entryLocationCompact&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;locations)</pre>
</li>
</ul>
<a id="isEntryLocationCompacting()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEntryLocationCompacting</h4>
<pre class="methodSignature">default&nbsp;boolean&nbsp;isEntryLocationCompacting()</pre>
</li>
</ul>
<a id="isEntryLocationCompacting(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEntryLocationCompacting</h4>
<pre class="methodSignature">default&nbsp;java.util.Map&lt;java.lang.String,&#8203;java.lang.Boolean&gt;&nbsp;isEntryLocationCompacting&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;locations)</pre>
</li>
</ul>
<a id="getEntryLocationDBPath()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryLocationDBPath</h4>
<pre class="methodSignature">default&nbsp;java.util.List&lt;java.lang.String&gt;&nbsp;getEntryLocationDBPath()</pre>
</li>
</ul>
<a id="localConsistencyCheck(java.util.Optional)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localConsistencyCheck</h4>
<pre class="methodSignature">default&nbsp;java.util.List&lt;<a href="LedgerStorage.DetectedInconsistency.html" title="class in org.apache.bookkeeper.bookie">LedgerStorage.DetectedInconsistency</a>&gt;&nbsp;localConsistencyCheck&#8203;(java.util.Optional&lt;com.google.common.util.concurrent.RateLimiter&gt;&nbsp;rateLimiter)
                                                                           throws java.io.IOException</pre>
<div class="block">Performs internal check of local storage logging any inconsistencies.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rateLimiter</code> - Provide to rate of entry checking.  null for unlimited.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>List of inconsistencies detected</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="isInForceGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInForceGC</h4>
<pre class="methodSignature">default&nbsp;boolean&nbsp;isInForceGC()</pre>
<div class="block">Whether force triggered Garbage Collection is running or not.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true  -- force triggered Garbage Collection is running,
      false -- force triggered Garbage Collection is not running</dd>
</dl>
</li>
</ul>
<a id="getGarbageCollectionStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGarbageCollectionStatus</h4>
<pre class="methodSignature">default&nbsp;java.util.List&lt;<a href="GarbageCollectionStatus.html" title="class in org.apache.bookkeeper.bookie">GarbageCollectionStatus</a>&gt;&nbsp;getGarbageCollectionStatus()</pre>
<div class="block">Get Garbage Collection status.
 Since DbLedgerStorage is a list of storage instances, we should return a list.</div>
</li>
</ul>
<a id="getListOfEntriesOfLedger(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getListOfEntriesOfLedger</h4>
<pre class="methodSignature">java.util.PrimitiveIterator.OfLong&nbsp;getListOfEntriesOfLedger&#8203;(long&nbsp;ledgerId)
                                                     throws java.io.IOException</pre>
<div class="block">Returns the primitive long iterator for entries of the ledger, stored in
 this LedgerStorage. The returned iterator provide weakly consistent state
 of the ledger. It is guaranteed that entries of the ledger added to this
 LedgerStorage by the time this method is called will be available but
 modifications made after method invocation may not be available.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - - id of the ledger</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the list of entries of the ledger available in this
         ledgerstorage.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getStorageStateFlags()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageStateFlags</h4>
<pre class="methodSignature">java.util.EnumSet&lt;<a href="LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&gt;&nbsp;getStorageStateFlags()
                                                            throws java.io.IOException</pre>
<div class="block">Get the storage state flags currently set for the storage instance.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="setStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStorageStateFlag</h4>
<pre class="methodSignature">void&nbsp;setStorageStateFlag&#8203;(<a href="LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&nbsp;flags)
                  throws java.io.IOException</pre>
<div class="block">Set a storage state flag for the storage instance.
 Implementations must ensure this method is atomic, and the flag
 is persisted to storage when the method returns.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="clearStorageStateFlag(org.apache.bookkeeper.bookie.LedgerStorage.StorageState)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>clearStorageStateFlag</h4>
<pre class="methodSignature">void&nbsp;clearStorageStateFlag&#8203;(<a href="LedgerStorage.StorageState.html" title="enum in org.apache.bookkeeper.bookie">LedgerStorage.StorageState</a>&nbsp;flags)
                    throws java.io.IOException</pre>
<div class="block">Clear a storage state flag for the storage instance.
 Implementations must ensure this method is atomic, and the flag
 is persisted to storage when the method returns.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LedgerStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2011&#x2013;2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
