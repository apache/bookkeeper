<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>GarbageCollectorThread (Apache BookKeeper :: Parent 4.18.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="GarbageCollectorThread (Apache BookKeeper :: Parent 4.18.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":9,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GarbageCollectorThread.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.bookkeeper.bookie</a></div>
<h2 title="Class GarbageCollectorThread" class="title">Class GarbageCollectorThread</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.bookkeeper.bookie.GarbageCollectorThread</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.Runnable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">GarbageCollectorThread</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">This is the garbage collector thread that runs in the background to
 remove any entry log files that no longer contains any active ledger.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.concurrent.atomic.AtomicBoolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#compacting">compacting</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="AbstractLogCompactor.html" title="class in org.apache.bookkeeper.bookie">AbstractLogCompactor</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#compactor">compactor</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#conf">conf</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#enableMajorCompaction">enableMajorCompaction</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#enableMinorCompaction">enableMinorCompaction</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="storage/EntryLogger.html" title="interface in org.apache.bookkeeper.bookie.storage">EntryLogger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#entryLogger">entryLogger</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.concurrent.atomic.AtomicBoolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forceGarbageCollection">forceGarbageCollection</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="GarbageCollector.GarbageCleaner.html" title="interface in org.apache.bookkeeper.bookie">GarbageCollector.GarbageCleaner</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#garbageCleaner">garbageCleaner</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="ScanAndCompareGarbageCollector.html" title="class in org.apache.bookkeeper.bookie">ScanAndCompareGarbageCollector</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#garbageCollector">garbageCollector</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#gcWaitTime">gcWaitTime</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isForceGCAllowWhenNoSpace">isForceGCAllowWhenNoSpace</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isForceMajorCompactionAllow">isForceMajorCompactionAllow</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isForceMinorCompactionAllow">isForceMinorCompactionAllow</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lastMajorCompactionTime">lastMajorCompactionTime</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lastMinorCompactionTime">lastMinorCompactionTime</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ledgerDirsManager">ledgerDirsManager</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="CompactableLedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">CompactableLedgerStorage</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ledgerStorage">ledgerStorage</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.util.concurrent.atomic.AtomicBoolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#majorCompacting">majorCompacting</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#majorCompactionInterval">majorCompactionInterval</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#majorCompactionMaxTimeMillis">majorCompactionMaxTimeMillis</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#majorCompactionThreshold">majorCompactionThreshold</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.util.concurrent.atomic.AtomicBoolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#minorCompacting">minorCompacting</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#minorCompactionInterval">minorCompactionInterval</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#minorCompactionMaxTimeMillis">minorCompactionMaxTimeMillis</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#minorCompactionThreshold">minorCompactionThreshold</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#running">running</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.concurrent.Future&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#scheduledFuture">scheduledFuture</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.util.concurrent.atomic.AtomicBoolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#suspendMajorCompaction">suspendMajorCompaction</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.concurrent.atomic.AtomicBoolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#suspendMinorCompaction">suspendMinorCompaction</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="AbstractLogCompactor.Throttler.html" title="class in org.apache.bookkeeper.bookie">AbstractLogCompactor.Throttler</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#throttler">throttler</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.CompactableLedgerStorage,org.apache.bookkeeper.bookie.storage.EntryLogger,org.apache.bookkeeper.stats.StatsLogger)">GarbageCollectorThread</a></span>&#8203;(<a href="../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                      <a href="../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
                      <a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
                      <a href="CompactableLedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">CompactableLedgerStorage</a>&nbsp;ledgerStorage,
                      <a href="storage/EntryLogger.html" title="interface in org.apache.bookkeeper.bookie.storage">EntryLogger</a>&nbsp;entryLogger,
                      <a href="../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger)</code></th>
<td class="colLast">
<div class="block">Create a garbage collector thread.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.CompactableLedgerStorage,org.apache.bookkeeper.bookie.storage.EntryLogger,org.apache.bookkeeper.stats.StatsLogger,java.util.concurrent.ScheduledExecutorService)">GarbageCollectorThread</a></span>&#8203;(<a href="../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                      <a href="../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
                      <a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
                      <a href="CompactableLedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">CompactableLedgerStorage</a>&nbsp;ledgerStorage,
                      <a href="storage/EntryLogger.html" title="interface in org.apache.bookkeeper.bookie.storage">EntryLogger</a>&nbsp;entryLogger,
                      <a href="../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger,
                      java.util.concurrent.ScheduledExecutorService&nbsp;gcExecutor)</code></th>
<td class="colLast">
<div class="block">Create a garbage collector thread.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculateUsageIndex(int,double)">calculateUsageIndex</a></span>&#8203;(int&nbsp;numBuckets,
                   double&nbsp;usage)</code></th>
<td class="colLast">
<div class="block">Calculate the index for the batch based on the usage between 0 and 1.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#compactEntryLog(org.apache.bookkeeper.bookie.EntryLogMetadata)">compactEntryLog</a></span>&#8203;(<a href="EntryLogMetadata.html" title="class in org.apache.bookkeeper.bookie">EntryLogMetadata</a>&nbsp;entryLogMeta)</code></th>
<td class="colLast">
<div class="block">Compact an entry log.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#disableForceGC()">disableForceGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doCompactEntryLogs(double,long)">doCompactEntryLogs</a></span>&#8203;(double&nbsp;threshold,
                  long&nbsp;maxTimeMillis)</code></th>
<td class="colLast">
<div class="block">Compact entry logs if necessary.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#enableForceGC()">enableForceGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#enableForceGC(boolean,boolean)">enableForceGC</a></span>&#8203;(boolean&nbsp;forceMajor,
             boolean&nbsp;forceMinor)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#extractMetaFromEntryLogs()">extractMetaFromEntryLogs</a></span>()</code></th>
<td class="colLast">
<div class="block">Method to read in all of the entry logs (those that we haven't done so yet),
 and find the set of ledger ID's that make up each entry log file.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>(package private) <a href="EntryLogMetadataMap.html" title="interface in org.apache.bookkeeper.bookie">EntryLogMetadataMap</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEntryLogMetaMap()">getEntryLogMetaMap</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="GarbageCollectionStatus.html" title="class in org.apache.bookkeeper.bookie">GarbageCollectionStatus</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGarbageCollectionStatus()">getGarbageCollectionStatus</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>(package private) <a href="CompactableLedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">CompactableLedgerStorage</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLedgerStorage()">getLedgerStorage</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getModInitialDelay()">getModInitialDelay</a></span>()</code></th>
<td class="colLast">
<div class="block">when number of ledger's Dir are more than 1,the same of GarbageCollectorThread will do the same thing,
 Especially
 1) deleting ledger, then SyncThread will be timed to do rocksDB compact
 2) compact: entry, cost cpu.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isForceGCAllowWhenNoSpace()">isForceGCAllowWhenNoSpace</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isInForceGC()">isInForceGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isMajorGcSuspend()">isMajorGcSuspend</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isMinorGcSuspend()">isMinorGcSuspend</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>(package private) static java.util.concurrent.ScheduledExecutorService</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newExecutor()">newExecutor</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeEntryLog(long)">removeEntryLog</a></span>&#8203;(long&nbsp;entryLogId)</code></th>
<td class="colLast">
<div class="block">Remove entry log.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resumeMajorGC()">resumeMajorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resumeMinorGC()">resumeMinorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run()">run</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#runWithFlags(boolean,boolean,boolean)">runWithFlags</a></span>&#8203;(boolean&nbsp;force,
            boolean&nbsp;suspendMajor,
            boolean&nbsp;suspendMinor)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shutdown()">shutdown</a></span>()</code></th>
<td class="colLast">
<div class="block">Shutdown the garbage collector thread.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#start()">start</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#suspendMajorGC()">suspendMajorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#suspendMinorGC()">suspendMinorGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>(package private) java.util.concurrent.Future&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#triggerGC()">triggerGC</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>(package private) java.util.concurrent.Future&lt;?&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#triggerGC(boolean,boolean,boolean)">triggerGC</a></span>&#8203;(boolean&nbsp;force,
         boolean&nbsp;suspendMajor,
         boolean&nbsp;suspendMinor)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="scheduledFuture">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduledFuture</h4>
<pre>java.util.concurrent.Future&lt;?&gt; scheduledFuture</pre>
</li>
</ul>
<a id="gcWaitTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gcWaitTime</h4>
<pre>final&nbsp;long gcWaitTime</pre>
</li>
</ul>
<a id="isForceMinorCompactionAllow">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isForceMinorCompactionAllow</h4>
<pre>boolean isForceMinorCompactionAllow</pre>
</li>
</ul>
<a id="enableMinorCompaction">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableMinorCompaction</h4>
<pre>boolean enableMinorCompaction</pre>
</li>
</ul>
<a id="minorCompactionThreshold">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>minorCompactionThreshold</h4>
<pre>final&nbsp;double minorCompactionThreshold</pre>
</li>
</ul>
<a id="minorCompactionInterval">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>minorCompactionInterval</h4>
<pre>final&nbsp;long minorCompactionInterval</pre>
</li>
</ul>
<a id="minorCompactionMaxTimeMillis">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>minorCompactionMaxTimeMillis</h4>
<pre>final&nbsp;long minorCompactionMaxTimeMillis</pre>
</li>
</ul>
<a id="lastMinorCompactionTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastMinorCompactionTime</h4>
<pre>long lastMinorCompactionTime</pre>
</li>
</ul>
<a id="isForceMajorCompactionAllow">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isForceMajorCompactionAllow</h4>
<pre>boolean isForceMajorCompactionAllow</pre>
</li>
</ul>
<a id="enableMajorCompaction">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableMajorCompaction</h4>
<pre>boolean enableMajorCompaction</pre>
</li>
</ul>
<a id="majorCompactionThreshold">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>majorCompactionThreshold</h4>
<pre>final&nbsp;double majorCompactionThreshold</pre>
</li>
</ul>
<a id="majorCompactionInterval">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>majorCompactionInterval</h4>
<pre>final&nbsp;long majorCompactionInterval</pre>
</li>
</ul>
<a id="majorCompactionMaxTimeMillis">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>majorCompactionMaxTimeMillis</h4>
<pre>long majorCompactionMaxTimeMillis</pre>
</li>
</ul>
<a id="lastMajorCompactionTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastMajorCompactionTime</h4>
<pre>long lastMajorCompactionTime</pre>
</li>
</ul>
<a id="isForceGCAllowWhenNoSpace">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isForceGCAllowWhenNoSpace</h4>
<pre>final&nbsp;boolean isForceGCAllowWhenNoSpace</pre>
</li>
</ul>
<a id="entryLogger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entryLogger</h4>
<pre>final&nbsp;<a href="storage/EntryLogger.html" title="interface in org.apache.bookkeeper.bookie.storage">EntryLogger</a> entryLogger</pre>
</li>
</ul>
<a id="compactor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compactor</h4>
<pre><a href="AbstractLogCompactor.html" title="class in org.apache.bookkeeper.bookie">AbstractLogCompactor</a> compactor</pre>
</li>
</ul>
<a id="ledgerStorage">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ledgerStorage</h4>
<pre>final&nbsp;<a href="CompactableLedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">CompactableLedgerStorage</a> ledgerStorage</pre>
</li>
</ul>
<a id="compacting">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compacting</h4>
<pre>final&nbsp;java.util.concurrent.atomic.AtomicBoolean compacting</pre>
</li>
</ul>
<a id="minorCompacting">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>minorCompacting</h4>
<pre>final&nbsp;java.util.concurrent.atomic.AtomicBoolean minorCompacting</pre>
</li>
</ul>
<a id="majorCompacting">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>majorCompacting</h4>
<pre>final&nbsp;java.util.concurrent.atomic.AtomicBoolean majorCompacting</pre>
</li>
</ul>
<a id="running">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>running</h4>
<pre>volatile&nbsp;boolean running</pre>
</li>
</ul>
<a id="forceGarbageCollection">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceGarbageCollection</h4>
<pre>final&nbsp;java.util.concurrent.atomic.AtomicBoolean forceGarbageCollection</pre>
</li>
</ul>
<a id="suspendMajorCompaction">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspendMajorCompaction</h4>
<pre>final&nbsp;java.util.concurrent.atomic.AtomicBoolean suspendMajorCompaction</pre>
</li>
</ul>
<a id="suspendMinorCompaction">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspendMinorCompaction</h4>
<pre>final&nbsp;java.util.concurrent.atomic.AtomicBoolean suspendMinorCompaction</pre>
</li>
</ul>
<a id="garbageCollector">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>garbageCollector</h4>
<pre>final&nbsp;<a href="ScanAndCompareGarbageCollector.html" title="class in org.apache.bookkeeper.bookie">ScanAndCompareGarbageCollector</a> garbageCollector</pre>
</li>
</ul>
<a id="garbageCleaner">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>garbageCleaner</h4>
<pre>final&nbsp;<a href="GarbageCollector.GarbageCleaner.html" title="interface in org.apache.bookkeeper.bookie">GarbageCollector.GarbageCleaner</a> garbageCleaner</pre>
</li>
</ul>
<a id="conf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conf</h4>
<pre>final&nbsp;<a href="../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a> conf</pre>
</li>
</ul>
<a id="ledgerDirsManager">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ledgerDirsManager</h4>
<pre>final&nbsp;<a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a> ledgerDirsManager</pre>
</li>
</ul>
<a id="throttler">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>throttler</h4>
<pre>final&nbsp;<a href="AbstractLogCompactor.Throttler.html" title="class in org.apache.bookkeeper.bookie">AbstractLogCompactor.Throttler</a> throttler</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.CompactableLedgerStorage,org.apache.bookkeeper.bookie.storage.EntryLogger,org.apache.bookkeeper.stats.StatsLogger)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GarbageCollectorThread</h4>
<pre>public&nbsp;GarbageCollectorThread&#8203;(<a href="../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                              <a href="../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
                              <a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
                              <a href="CompactableLedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">CompactableLedgerStorage</a>&nbsp;ledgerStorage,
                              <a href="storage/EntryLogger.html" title="interface in org.apache.bookkeeper.bookie.storage">EntryLogger</a>&nbsp;entryLogger,
                              <a href="../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger)
                       throws java.io.IOException</pre>
<div class="block">Create a garbage collector thread.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>conf</code> - Server Configuration Object.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(org.apache.bookkeeper.conf.ServerConfiguration,org.apache.bookkeeper.meta.LedgerManager,org.apache.bookkeeper.bookie.LedgerDirsManager,org.apache.bookkeeper.bookie.CompactableLedgerStorage,org.apache.bookkeeper.bookie.storage.EntryLogger,org.apache.bookkeeper.stats.StatsLogger,java.util.concurrent.ScheduledExecutorService)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GarbageCollectorThread</h4>
<pre>public&nbsp;GarbageCollectorThread&#8203;(<a href="../conf/ServerConfiguration.html" title="class in org.apache.bookkeeper.conf">ServerConfiguration</a>&nbsp;conf,
                              <a href="../meta/LedgerManager.html" title="interface in org.apache.bookkeeper.meta">LedgerManager</a>&nbsp;ledgerManager,
                              <a href="LedgerDirsManager.html" title="class in org.apache.bookkeeper.bookie">LedgerDirsManager</a>&nbsp;ledgerDirsManager,
                              <a href="CompactableLedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">CompactableLedgerStorage</a>&nbsp;ledgerStorage,
                              <a href="storage/EntryLogger.html" title="interface in org.apache.bookkeeper.bookie.storage">EntryLogger</a>&nbsp;entryLogger,
                              <a href="../stats/StatsLogger.html" title="interface in org.apache.bookkeeper.stats">StatsLogger</a>&nbsp;statsLogger,
                              java.util.concurrent.ScheduledExecutorService&nbsp;gcExecutor)
                       throws java.io.IOException</pre>
<div class="block">Create a garbage collector thread.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>conf</code> - Server Configuration Object.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="newExecutor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newExecutor</h4>
<pre class="methodSignature">static&nbsp;java.util.concurrent.ScheduledExecutorService&nbsp;newExecutor()</pre>
</li>
</ul>
<a id="enableForceGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableForceGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;enableForceGC()</pre>
</li>
</ul>
<a id="enableForceGC(boolean,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableForceGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;enableForceGC&#8203;(boolean&nbsp;forceMajor,
                          boolean&nbsp;forceMinor)</pre>
</li>
</ul>
<a id="disableForceGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableForceGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;disableForceGC()</pre>
</li>
</ul>
<a id="triggerGC(boolean,boolean,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerGC</h4>
<pre class="methodSignature">java.util.concurrent.Future&lt;?&gt;&nbsp;triggerGC&#8203;(boolean&nbsp;force,
                                         boolean&nbsp;suspendMajor,
                                         boolean&nbsp;suspendMinor)</pre>
</li>
</ul>
<a id="triggerGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerGC</h4>
<pre class="methodSignature">java.util.concurrent.Future&lt;?&gt;&nbsp;triggerGC()</pre>
</li>
</ul>
<a id="isInForceGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInForceGC</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isInForceGC()</pre>
</li>
</ul>
<a id="isMajorGcSuspend()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMajorGcSuspend</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isMajorGcSuspend()</pre>
</li>
</ul>
<a id="isMinorGcSuspend()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMinorGcSuspend</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isMinorGcSuspend()</pre>
</li>
</ul>
<a id="suspendMajorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspendMajorGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;suspendMajorGC()</pre>
</li>
</ul>
<a id="resumeMajorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resumeMajorGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;resumeMajorGC()</pre>
</li>
</ul>
<a id="suspendMinorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspendMinorGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;suspendMinorGC()</pre>
</li>
</ul>
<a id="resumeMinorGC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resumeMinorGC</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;resumeMinorGC()</pre>
</li>
</ul>
<a id="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;start()</pre>
</li>
</ul>
<a id="getModInitialDelay()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getModInitialDelay</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getModInitialDelay()</pre>
<div class="block">when number of ledger's Dir are more than 1,the same of GarbageCollectorThread will do the same thing,
 Especially
 1) deleting ledger, then SyncThread will be timed to do rocksDB compact
 2) compact: entry, cost cpu.
 then get Mod initial Delay time to simply avoid GarbageCollectorThread working at the same time</div>
</li>
</ul>
<a id="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;run()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a id="runWithFlags(boolean,boolean,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runWithFlags</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;runWithFlags&#8203;(boolean&nbsp;force,
                         boolean&nbsp;suspendMajor,
                         boolean&nbsp;suspendMinor)</pre>
</li>
</ul>
<a id="doCompactEntryLogs(double,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCompactEntryLogs</h4>
<pre class="methodSignature">void&nbsp;doCompactEntryLogs&#8203;(double&nbsp;threshold,
                        long&nbsp;maxTimeMillis)
                 throws <a href="BookieException.EntryLogMetadataMapException.html" title="class in org.apache.bookkeeper.bookie">BookieException.EntryLogMetadataMapException</a></pre>
<div class="block">Compact entry logs if necessary.

 <p>
 Compaction will be executed from low unused space to high unused space.
 Those entry log files whose remaining size percentage is higher than threshold
 would not be compacted.
 </p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="BookieException.EntryLogMetadataMapException.html" title="class in org.apache.bookkeeper.bookie">BookieException.EntryLogMetadataMapException</a></code></dd>
</dl>
</li>
</ul>
<a id="calculateUsageIndex(int,double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateUsageIndex</h4>
<pre class="methodSignature">int&nbsp;calculateUsageIndex&#8203;(int&nbsp;numBuckets,
                        double&nbsp;usage)</pre>
<div class="block">Calculate the index for the batch based on the usage between 0 and 1.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>numBuckets</code> - Number of reporting buckets.</dd>
<dd><code>usage</code> - 0.0 - 1.0 value representing the usage of the entry log.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>index based on the number of buckets The last bucket will have the 1.0 if added.</dd>
</dl>
</li>
</ul>
<a id="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;shutdown()
              throws java.lang.InterruptedException</pre>
<div class="block">Shutdown the garbage collector thread.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code> - if there is an exception stopping gc thread.</dd>
</dl>
</li>
</ul>
<a id="removeEntryLog(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeEntryLog</h4>
<pre class="methodSignature">protected&nbsp;boolean&nbsp;removeEntryLog&#8203;(long&nbsp;entryLogId)
                          throws <a href="BookieException.EntryLogMetadataMapException.html" title="class in org.apache.bookkeeper.bookie">BookieException.EntryLogMetadataMapException</a></pre>
<div class="block">Remove entry log.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>entryLogId</code> - Entry Log File Id</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="BookieException.EntryLogMetadataMapException.html" title="class in org.apache.bookkeeper.bookie">BookieException.EntryLogMetadataMapException</a></code></dd>
</dl>
</li>
</ul>
<a id="compactEntryLog(org.apache.bookkeeper.bookie.EntryLogMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compactEntryLog</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;compactEntryLog&#8203;(<a href="EntryLogMetadata.html" title="class in org.apache.bookkeeper.bookie">EntryLogMetadata</a>&nbsp;entryLogMeta)</pre>
<div class="block">Compact an entry log.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>entryLogMeta</code> - </dd>
</dl>
</li>
</ul>
<a id="extractMetaFromEntryLogs()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>extractMetaFromEntryLogs</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;extractMetaFromEntryLogs()
                                 throws <a href="BookieException.EntryLogMetadataMapException.html" title="class in org.apache.bookkeeper.bookie">BookieException.EntryLogMetadataMapException</a></pre>
<div class="block">Method to read in all of the entry logs (those that we haven't done so yet),
 and find the set of ledger ID's that make up each entry log file.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="BookieException.EntryLogMetadataMapException.html" title="class in org.apache.bookkeeper.bookie">BookieException.EntryLogMetadataMapException</a></code></dd>
</dl>
</li>
</ul>
<a id="getLedgerStorage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLedgerStorage</h4>
<pre class="methodSignature"><a href="CompactableLedgerStorage.html" title="interface in org.apache.bookkeeper.bookie">CompactableLedgerStorage</a>&nbsp;getLedgerStorage()</pre>
</li>
</ul>
<a id="getEntryLogMetaMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryLogMetaMap</h4>
<pre class="methodSignature"><a href="EntryLogMetadataMap.html" title="interface in org.apache.bookkeeper.bookie">EntryLogMetadataMap</a>&nbsp;getEntryLogMetaMap()</pre>
</li>
</ul>
<a id="getGarbageCollectionStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGarbageCollectionStatus</h4>
<pre class="methodSignature">public&nbsp;<a href="GarbageCollectionStatus.html" title="class in org.apache.bookkeeper.bookie">GarbageCollectionStatus</a>&nbsp;getGarbageCollectionStatus()</pre>
</li>
</ul>
<a id="isForceGCAllowWhenNoSpace()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isForceGCAllowWhenNoSpace</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isForceGCAllowWhenNoSpace()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GarbageCollectorThread.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2011&#x2013;2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
